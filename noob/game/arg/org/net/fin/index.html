<!DOCTYPE html>
<html lang="fr" data-theme="dark">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, viewport-fit=cover">
<title>âš”ï¸ RÃ‰SISTANCE CITOYENNE â€” Intelligence Civile</title>
<meta name="description" content="Jeu RPG d'intelligence civile belge. 12 missions, quiz, 15 outils, flashcards.">
<meta name="theme-color" content="#030306">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600&family=Orbitron:wght@700;900&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   RÃ‰SISTANCE CITOYENNE v3 â€” STYLES
   Mobile-first â€¢ Dark Cyberpunk â€¢ ARIA â€¢ Reduced Motion â€¢ Quiz/Stats/Content
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

:root{
  --mint:#7fffd4;--mint-d:rgba(127,255,212,.12);--mint-g:rgba(127,255,212,.35);
  --lilac:#c8a2ff;--lilac-d:rgba(200,162,255,.12);--lilac-g:rgba(200,162,255,.35);
  --bg0:#030306;--bg1:#080810;--bg2:#0c0c16;--bg3:#12121e;--bg4:#181826;--bg5:#1e1e2e;
  --t1:#f0f0ff;--t2:#a0a0c0;--t3:#606080;
  --danger:#ff4757;--success:#2ed573;--warning:#ffa502;--info:#00d9ff;
  --brd:rgba(127,255,212,.12);--brd-h:rgba(127,255,212,.25);
  --r:6px;--tr:.2s ease;
  --f-display:'Orbitron',monospace;--f-body:'Space Grotesk',sans-serif;--f-mono:'JetBrains Mono',monospace;
  --safe-b:env(safe-area-inset-bottom,0px);
}
[data-theme="console"]{--mint:#00ff00;--lilac:#00ff00;--mint-d:rgba(0,255,0,.12);--mint-g:rgba(0,255,0,.4);--bg0:#000;--bg1:#000a00;--bg2:#001200;--bg3:#001a00;--bg4:#002200;--bg5:#002a00;--t1:#00ff00;--t2:#00cc00;--t3:#008800;--brd:rgba(0,255,0,.15);--f-body:'JetBrains Mono',monospace;--f-display:'JetBrains Mono',monospace;}
[data-theme="neon"]{--mint:#00ffff;--lilac:#ff00ff;--mint-d:rgba(0,255,255,.12);--lilac-d:rgba(255,0,255,.12);--mint-g:rgba(0,255,255,.4);--lilac-g:rgba(255,0,255,.4);--bg0:#05000a;--bg1:#0a0015;--bg2:#100020;--bg3:#18002d;--bg4:#200038;--bg5:#280045;--t1:#fff;--t2:#ff88ff;--t3:#8844aa;--brd:rgba(255,0,255,.15);}
[data-theme="80s"]{--mint:#ff6ec7;--lilac:#00ced1;--mint-d:rgba(255,110,199,.12);--lilac-d:rgba(0,206,209,.12);--mint-g:rgba(255,110,199,.4);--lilac-g:rgba(0,206,209,.4);--bg0:#0f0518;--bg1:#180a25;--bg2:#200f30;--bg3:#28143a;--bg4:#301945;--bg5:#381e50;--t1:#fff8dc;--t2:#ffb6c1;--t3:#9370db;--brd:rgba(255,110,199,.15);}

*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
html{font-size:14px;-webkit-text-size-adjust:100%}
body{font-family:var(--f-body);background:var(--bg0);color:var(--t1);min-height:100dvh;-webkit-tap-highlight-color:transparent;overscroll-behavior-y:contain}
a{color:var(--mint);text-decoration:none}
img{max-width:100%}
button{cursor:pointer;font:inherit;border:none;background:none;color:inherit}
input,textarea,select{font:inherit;color:var(--t1);background:var(--bg3);border:1px solid var(--brd);border-radius:var(--r);padding:.5rem}
textarea:focus,input:focus,select:focus{outline:2px solid var(--mint);outline-offset:2px;border-color:var(--mint)}
::-webkit-scrollbar{width:4px}::-webkit-scrollbar-track{background:transparent}::-webkit-scrollbar-thumb{background:var(--brd);border-radius:2px}

/* â•â•â• REDUCED MOTION â•â•â• */
@media(prefers-reduced-motion:reduce){*,*::before,*::after{animation-duration:.01ms!important;transition-duration:.01ms!important}}

/* â•â•â• SKIP LINK â•â•â• */
.skip-link{position:absolute;top:-100%;left:0;background:var(--mint);color:var(--bg0);padding:.5rem 1rem;z-index:9999;font-weight:700}
.skip-link:focus{top:0}

/* â•â•â• HEADER â•â•â• */
.header{position:sticky;top:0;z-index:100;background:rgba(3,3,6,.92);backdrop-filter:blur(10px);border-bottom:1px solid var(--brd);padding:.5rem .75rem;display:flex;align-items:center;gap:.5rem}
.hdr-logo{font:700 .85rem var(--f-display);color:var(--mint);letter-spacing:1px;white-space:nowrap}
.xp-wrap{flex:1;display:flex;align-items:center;gap:.4rem;min-width:0}
.xp-rank{font:.6rem var(--f-display);color:var(--lilac);white-space:nowrap}
.xp-bar{flex:1;height:6px;background:var(--bg4);border-radius:3px;overflow:hidden;min-width:40px}
.xp-fill{height:100%;background:linear-gradient(90deg,var(--mint),var(--lilac));border-radius:3px;transition:width .4s ease}
.xp-text{font:.6rem var(--f-mono);color:var(--t3);white-space:nowrap}
.theme-dots{display:flex;gap:4px}
.theme-dots button{width:16px;height:16px;border-radius:50%;border:2px solid transparent;transition:border-color var(--tr)}
.theme-dots button.active{border-color:var(--t1)}
.theme-dots [data-th="dark"]{background:#7fffd4}
.theme-dots [data-th="console"]{background:#00ff00}
.theme-dots [data-th="neon"]{background:#ff00ff}
.theme-dots [data-th="80s"]{background:#ff6ec7}

/* â•â•â• MAIN â•â•â• */
main{padding-bottom:calc(70px + var(--safe-b));min-height:calc(100dvh - 50px)}
main:focus{outline:none}

/* â•â•â• BOTTOM NAV â•â•â• */
.bnav{position:fixed;bottom:0;left:0;right:0;z-index:100;background:rgba(3,3,6,.95);backdrop-filter:blur(10px);border-top:1px solid var(--brd);display:flex;padding-bottom:var(--safe-b)}
.bnav-btn{flex:1;display:flex;flex-direction:column;align-items:center;gap:2px;padding:.4rem 0;font-size:.55rem;color:var(--t3);min-height:44px;justify-content:center;transition:color var(--tr)}
.bnav-btn.active{color:var(--mint)}
.bnav-btn .ico{font-size:1.1rem}

/* â•â•â• PAGE â•â•â• */
.page{padding:.75rem;max-width:800px;margin:0 auto}
.page-head{display:flex;align-items:center;gap:.5rem;flex-wrap:wrap;margin-bottom:.75rem}
.page-head h2{font:700 1rem var(--f-display);color:var(--mint);flex:1}
.page-sub{font-size:.75rem;color:var(--t3);margin-bottom:.75rem}
.back-btn{font-size:.8rem;color:var(--lilac);padding:.3rem .5rem;border:1px solid var(--brd);border-radius:var(--r);min-height:32px}
.back-btn:hover,.back-btn:focus{border-color:var(--lilac);outline:none}
.done-badge{font-size:.65rem;color:var(--success);background:rgba(46,213,115,.15);padding:2px 8px;border-radius:var(--r)}

/* â•â•â• SEARCH BAR â€” NEW â•â•â• */
.search-bar{margin-bottom:.75rem}
.search-bar input{width:100%;padding:.5rem .75rem;border-radius:20px;font-size:.85rem}

/* â•â•â• HUB â•â•â• */
.hub{max-width:600px;margin:0 auto;padding:.5rem}
.hub-header{text-align:center;margin-bottom:1rem}
.hub-title{font:900 1.2rem var(--f-display);background:linear-gradient(135deg,var(--mint),var(--lilac));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
.hub-sub{font-size:.7rem;color:var(--t3);margin-top:2px}
.hub-rank-card{background:var(--bg3);border:1px solid var(--brd);border-radius:var(--r);padding:.75rem;display:flex;align-items:center;gap:.75rem;margin-bottom:.75rem}
.rank-big{font-size:2rem}
.rank-info{flex:1}
.rank-name{font:700 .85rem var(--f-display)}
.rank-bar{height:6px;background:var(--bg4);border-radius:3px;overflow:hidden;margin:.3rem 0}
.rank-fill{height:100%;background:linear-gradient(90deg,var(--mint),var(--lilac));border-radius:3px;transition:width .4s}
.rank-xp{font:.65rem var(--f-mono);color:var(--t3)}
.hub-stats{display:grid;grid-template-columns:repeat(4,1fr);gap:.4rem;margin-bottom:.75rem}
.hs{background:var(--bg3);border:1px solid var(--brd);border-radius:var(--r);padding:.4rem;text-align:center}
.hs-v{font:700 1rem var(--f-display);color:var(--mint)}
.hs-l{font-size:.55rem;color:var(--t3);margin-top:2px}
.hub-quote{background:var(--bg2);border-left:3px solid var(--lilac);padding:.6rem .75rem;margin-bottom:.75rem;border-radius:0 var(--r) var(--r) 0}
.hq-text{font-size:.8rem;font-style:italic;color:var(--t2)}
.hq-author{font-size:.65rem;color:var(--lilac);margin-top:4px}
.hub-actions{display:grid;grid-template-columns:repeat(2,1fr);gap:.4rem;margin-bottom:.75rem}
.hbtn{padding:.5rem .75rem;border:1px solid var(--brd);border-radius:var(--r);font-size:.8rem;text-align:center;min-height:44px;transition:all var(--tr)}
.hbtn:hover,.hbtn:focus{border-color:var(--mint);background:var(--mint-d);outline:none}
.hbtn-primary{background:var(--mint-d);border-color:var(--mint);color:var(--mint)}
.hbtn-done{background:rgba(46,213,115,.15);border-color:var(--success);color:var(--success)}
.hbtn-sm{font-size:.7rem;padding:.3rem .5rem;border:1px solid var(--brd);border-radius:var(--r);min-height:32px}
.hbtn-sm:hover,.hbtn-sm:focus{border-color:var(--mint);outline:none}
.hub-section-title{font:700 .7rem var(--f-display);color:var(--t3);margin-bottom:.4rem;text-transform:uppercase;letter-spacing:1px}
.hub-missions{display:flex;flex-direction:column;gap:.3rem;margin-bottom:.75rem}
.hm-card{display:flex;align-items:center;gap:.5rem;padding:.5rem;background:var(--bg3);border:1px solid var(--brd);border-radius:var(--r);cursor:pointer;transition:border-color var(--tr);min-height:44px}
.hm-card:hover,.hm-card:focus{border-color:var(--mint);outline:none}
.hm-icon{font-size:1.2rem}
.hm-info{flex:1;min-width:0}
.hm-name{font-size:.75rem;font-weight:600;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.hm-bar{height:4px;background:var(--bg4);border-radius:2px;overflow:hidden;margin:.2rem 0}
.hm-fill{height:100%;background:var(--mint);border-radius:2px;transition:width .3s}
.hm-pct{font:.55rem var(--f-mono);color:var(--t3)}
.hm-arrow{color:var(--t3);font-size:1.2rem}
.hub-footer{display:flex;gap:.4rem;justify-content:center}

/* â•â•â• MISSION GRID â•â•â• */
.cat-filter{display:flex;gap:.3rem;overflow-x:auto;padding-bottom:.3rem;margin-bottom:.5rem;-webkit-overflow-scrolling:touch}
.cf-btn{white-space:nowrap;padding:.25rem .5rem;border:1px solid var(--brd);border-radius:20px;font-size:.7rem;color:var(--t3);min-height:32px}
.cf-btn.active{border-color:var(--mint);color:var(--mint);background:var(--mint-d)}
.mission-grid{display:grid;grid-template-columns:1fr;gap:.5rem}
@media(min-width:480px){.mission-grid{grid-template-columns:repeat(2,1fr)}}
@media(min-width:800px){.mission-grid{grid-template-columns:repeat(3,1fr)}}
.m-card{background:var(--bg3);border:1px solid var(--brd);border-radius:var(--r);padding:.6rem;cursor:pointer;transition:all var(--tr)}
.m-card:hover,.m-card:focus{border-color:var(--mint);transform:translateY(-2px);outline:none}
.m-done{border-color:var(--success)}
.m-top{display:flex;justify-content:space-between;align-items:center;margin-bottom:.3rem}
.m-icon{font-size:1.3rem}
.m-diff{font-size:.65rem;color:var(--warning)}
.m-name{font:600 .8rem var(--f-body);margin-bottom:2px}
.m-cat{font-size:.6rem;color:var(--t3);margin-bottom:.3rem}
.m-bar{height:4px;background:var(--bg4);border-radius:2px;overflow:hidden}
.m-fill{height:100%;background:linear-gradient(90deg,var(--mint),var(--lilac));border-radius:2px;transition:width .3s}
.m-meta{display:flex;justify-content:space-between;font:.6rem var(--f-mono);color:var(--t3);margin-top:.3rem}
.m-xp{color:var(--mint)}
.m-badge{font-size:.55rem;color:var(--success);text-align:center;margin-top:.3rem;font-weight:700}

/* â•â•â• SINGLE MISSION â•â•â• */
.mission-brief{background:var(--bg3);border:1px solid var(--brd);border-radius:var(--r);padding:.6rem;margin-bottom:.5rem}
.mb-label{font:.6rem var(--f-display);color:var(--mint);margin-bottom:.3rem;text-transform:uppercase;letter-spacing:1px}
.mb-text{font-size:.8rem;color:var(--t2);line-height:1.5}
.mission-lore{background:var(--bg2);border:1px solid var(--brd);border-radius:var(--r);padding:.5rem;margin-bottom:.5rem;cursor:pointer}
.ml-label{font-size:.7rem;color:var(--lilac);display:flex;justify-content:space-between}
.ml-toggle{transition:transform var(--tr)}
.mission-lore.open .ml-toggle{transform:rotate(180deg)}
.ml-text{font-size:.75rem;color:var(--t3);max-height:0;overflow:hidden;transition:max-height .3s;margin-top:0}
.mission-lore.open .ml-text{max-height:500px;margin-top:.4rem}
.mission-intel{margin-bottom:.5rem}
.mi-label{font:.6rem var(--f-display);color:var(--mint);margin-bottom:.3rem;text-transform:uppercase;letter-spacing:1px}
.mi-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:.3rem}
@media(min-width:500px){.mi-grid{grid-template-columns:repeat(4,1fr)}}
.mi-card{background:var(--bg3);border-radius:var(--r);padding:.4rem;text-align:center;border:1px solid var(--brd)}
.mi-danger{border-color:rgba(255,71,87,.3);background:rgba(255,71,87,.08)}
.mi-warning{border-color:rgba(255,165,2,.3);background:rgba(255,165,2,.08)}
.mi-info{border-color:rgba(0,217,255,.3);background:rgba(0,217,255,.08)}
.mi-mint{border-color:rgba(127,255,212,.3);background:rgba(127,255,212,.08)}
.mi-lilac{border-color:rgba(200,162,255,.3);background:rgba(200,162,255,.08)}
.mi-val{font:700 .85rem var(--f-display);color:var(--t1)}
.mi-lbl{font-size:.55rem;color:var(--t3);margin-top:2px}
.mission-progress{margin-bottom:.5rem}
.mp-bar{height:8px;background:var(--bg4);border-radius:4px;overflow:hidden}
.mp-fill{height:100%;background:linear-gradient(90deg,var(--mint),var(--lilac));border-radius:4px;transition:width .4s}
.mp-text{font:.6rem var(--f-mono);color:var(--t3);margin-top:3px;text-align:center}

/* â•â•â• OBJECTIVES with CONTENT â•â•â• */
.mo-label{font:.6rem var(--f-display);color:var(--mint);margin-bottom:.4rem;text-transform:uppercase;letter-spacing:1px}
.mo-item{background:var(--bg3);border:1px solid var(--brd);border-radius:var(--r);margin-bottom:.3rem;overflow:hidden}
.mo-header{display:flex;align-items:center;gap:.4rem;padding:.5rem;cursor:pointer;min-height:44px}
.mo-header:focus{outline:2px solid var(--mint);outline-offset:-2px}
.mo-done{border-color:rgba(46,213,115,.3)}
.mo-done .mo-text{text-decoration:line-through;color:var(--t3)}
.mo-check{font-size:1rem;flex-shrink:0}
.mo-text{flex:1;font-size:.8rem}
.mo-xp{font:.6rem var(--f-mono);color:var(--mint);flex-shrink:0}

/* Content toggle & display â€” NEW */
.mo-content-toggle{padding:0 .5rem .4rem;display:flex}
.mo-read-btn{font-size:.7rem;padding:.25rem .5rem;border:1px solid var(--brd);border-radius:var(--r);color:var(--lilac);transition:all var(--tr)}
.mo-read-btn:hover,.mo-read-btn:focus{border-color:var(--lilac);background:var(--lilac-d);outline:none}
.mo-read-btn.read{color:var(--success);border-color:rgba(46,213,115,.3)}
.mo-content{padding:.5rem;background:var(--bg2);border-top:1px solid var(--brd)}
.mo-content-text{font-size:.78rem;color:var(--t2);line-height:1.6}
.mo-content-text p{margin-bottom:.5rem}
.mo-content-text strong{color:var(--mint);font-weight:600}

/* â•â•â• QUIZ â€” NEW â•â•â• */
.quiz-intro{font-size:.8rem;color:var(--t2);margin-bottom:1rem;padding:.5rem;background:var(--bg3);border-radius:var(--r);border:1px solid var(--brd)}
.quiz-q{margin-bottom:.75rem}
.qq-text{font-size:.85rem;font-weight:600;color:var(--t1);margin-bottom:.4rem}
.qq-choices{display:flex;flex-direction:column;gap:.25rem}
.qq-choice{display:flex;align-items:center;gap:.5rem;padding:.4rem .6rem;background:var(--bg3);border:1px solid var(--brd);border-radius:var(--r);cursor:pointer;font-size:.8rem;min-height:40px;transition:all var(--tr)}
.qq-choice:hover,.qq-choice:focus-within{border-color:var(--mint);background:var(--mint-d)}
.qq-choice input{accent-color:var(--mint)}
.qq-correct{border-color:var(--success)!important;background:rgba(46,213,115,.1)!important}
.quiz-result{padding:.6rem;border-radius:var(--r);font-weight:700;text-align:center;margin-bottom:.5rem}
.qr-pass{background:rgba(46,213,115,.15);color:var(--success);border:1px solid var(--success)}
.qr-fail{background:rgba(255,71,87,.15);color:var(--danger);border:1px solid var(--danger)}
.mission-quiz-link{margin:.5rem 0;text-align:center}

/* â•â•â• TOOLS â•â•â• */
.tp-section{margin-bottom:1rem}
.tp-head{display:flex;justify-content:space-between;align-items:center;margin-bottom:.4rem;padding-bottom:.3rem;border-bottom:1px solid var(--brd)}
.tp-name{font:700 .8rem var(--f-display);color:var(--mint)}
.tp-desc{font-size:.6rem;color:var(--t3)}
.tool-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:.3rem}
@media(min-width:600px){.tool-grid{grid-template-columns:repeat(3,1fr)}}
.t-card{background:var(--bg3);border:1px solid var(--brd);border-radius:var(--r);padding:.5rem;text-align:center;cursor:pointer;transition:all var(--tr);min-height:70px;display:flex;flex-direction:column;justify-content:center}
.t-card:hover,.t-card:focus{border-color:var(--mint);transform:translateY(-2px);outline:none}
.t-done{border-color:var(--success)}
.t-icon{font-size:1.3rem}
.t-name{font-size:.7rem;font-weight:600;margin-top:2px}
.t-xp{font:.55rem var(--f-mono);color:var(--mint);margin-top:2px}
.tool-phase{font-size:.7rem;color:var(--lilac);margin-bottom:.3rem}
.tool-help{font-size:.75rem;color:var(--t3);margin-bottom:.5rem;padding:.4rem;background:var(--bg2);border-radius:var(--r)}
.tool-progress{margin-bottom:.5rem}
.tp-bar{height:6px;background:var(--bg4);border-radius:3px;overflow:hidden}
.tp-fill{height:100%;background:var(--mint);border-radius:3px;transition:width .3s}
.tp-pct{font:.55rem var(--f-mono);color:var(--t3);margin-top:2px}
.tf-group{margin-bottom:.5rem}
.tf-label{font-size:.7rem;color:var(--lilac);display:block;margin-bottom:.2rem;font-weight:600}
.tf-input{width:100%;resize:vertical;min-height:60px}
.tool-tip{font-size:.7rem;color:var(--t3);text-align:center;margin-top:.3rem}
.mt-label{font:.6rem var(--f-display);color:var(--mint);margin-bottom:.3rem;text-transform:uppercase;letter-spacing:1px}
.mt-grid{display:flex;flex-wrap:wrap;gap:.3rem}
.mt-btn{padding:.35rem .6rem;font-size:.7rem;border:1px solid var(--brd);border-radius:var(--r);min-height:36px;transition:all var(--tr)}
.mt-btn:hover,.mt-btn:focus{border-color:var(--mint);background:var(--mint-d);outline:none}
.mt-prefill{font-size:.6rem;margin-left:2px}

/* â•â•â• FLASHCARDS â•â•â• */
.fc-empty{text-align:center;padding:2rem .5rem}
.fce-icon{font-size:2.5rem;margin-bottom:.5rem}
.fce-title{font:700 1rem var(--f-display);color:var(--t1);margin-bottom:.3rem}
.fce-text{font-size:.7rem;color:var(--t3);margin-bottom:1rem;max-width:350px;margin-left:auto;margin-right:auto}
.fce-actions{display:flex;flex-wrap:wrap;gap:.4rem;justify-content:center}
.fc-toolbar{display:flex;flex-wrap:wrap;gap:.3rem;margin-bottom:.5rem;align-items:center}
.fc-select{flex:1;min-width:120px;max-width:250px;font-size:.7rem;padding:.35rem .5rem;min-height:32px}
.fc-card-wrap{perspective:1000px;-webkit-perspective:1000px;margin:0 auto 1rem;max-width:500px;cursor:pointer}
.fc-card{position:relative;transition:transform .6s;transform-style:preserve-3d;-webkit-transform-style:preserve-3d}
.fc-card.flipped{transform:rotateY(180deg);-webkit-transform:rotateY(180deg)}
.fc-inner{position:relative;width:100%;min-height:200px;transform-style:preserve-3d;-webkit-transform-style:preserve-3d}
.fc-front,.fc-back{position:absolute;top:0;left:0;width:100%;min-height:200px;backface-visibility:hidden;-webkit-backface-visibility:hidden;border:1px solid var(--brd);border-radius:var(--r);display:flex;flex-direction:column;justify-content:center;align-items:center;padding:1rem;text-align:center}
.fc-front{background:var(--bg3);z-index:2}
.fc-back{background:var(--bg2);transform:rotateY(180deg);-webkit-transform:rotateY(180deg);z-index:1}
.fc-label{font:.5rem var(--f-display);color:var(--lilac);margin-bottom:.5rem;text-transform:uppercase;letter-spacing:2px}
.fc-question,.fc-answer{font-size:.9rem;line-height:1.5;word-break:break-word}
.fc-tap{font-size:.55rem;color:var(--t3);margin-top:.75rem}
.fc-progress-wrap{max-width:500px;margin:0 auto .75rem;text-align:center}
.fc-pbar{height:4px;background:var(--bg4);border-radius:2px;overflow:hidden}
.fc-pfill{height:100%;background:var(--mint);border-radius:2px;transition:width .3s}
.fc-counter{font:.6rem var(--f-mono);color:var(--t3);margin-top:3px}
.fc-rating{display:flex;gap:.5rem;justify-content:center;margin-bottom:.5rem}
.fcr-btn{flex:1;max-width:200px;padding:.5rem;border-radius:var(--r);font-size:.8rem;font-weight:600;min-height:44px;transition:all var(--tr)}
.fcr-good{border:1px solid var(--success);color:var(--success);background:rgba(46,213,115,.1)}
.fcr-good:hover{background:rgba(46,213,115,.25)}
.fcr-bad{border:1px solid var(--danger);color:var(--danger);background:rgba(255,71,87,.1)}
.fcr-bad:hover{background:rgba(255,71,87,.25)}
.fc-nav{display:flex;gap:.3rem;justify-content:center;margin-bottom:.5rem}
.fc-stats-row{display:flex;gap:.75rem;justify-content:center;font:.6rem var(--f-mono);color:var(--t3);flex-wrap:wrap}
.fcs-good{color:var(--success)}.fcs-bad{color:var(--danger)}

/* â•â•â• TROPHIES â•â•â• */
.ranks-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:.3rem;margin-bottom:1rem}
@media(min-width:500px){.ranks-grid{grid-template-columns:repeat(4,1fr)}}
.rank-card{background:var(--bg3);border:1px solid var(--brd);border-radius:var(--r);padding:.4rem;text-align:center}
.rk-done{border-color:rgba(127,255,212,.3);background:var(--mint-d)}
.rk-locked{opacity:.4}
.rk-icon{font-size:1.3rem}
.rk-name{font:.55rem var(--f-display);margin-top:2px}
.rk-min{font:.5rem var(--f-mono);color:var(--t3);margin-top:2px}
.trophy-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:.3rem}
@media(min-width:500px){.trophy-grid{grid-template-columns:repeat(3,1fr)}}
@media(min-width:700px){.trophy-grid{grid-template-columns:repeat(4,1fr)}}
.trophy-card{background:var(--bg3);border:1px solid var(--brd);border-radius:var(--r);padding:.5rem;text-align:center}
.tr-done{border-color:rgba(127,255,212,.3);background:var(--mint-d)}
.tr-locked{opacity:.5}
.tr-icon{font-size:1.3rem}
.tr-name{font-size:.65rem;font-weight:700;margin-top:2px}
.tr-desc{font-size:.55rem;color:var(--t3);margin-top:2px}
.tr-xp{font:.5rem var(--f-mono);color:var(--mint);margin-top:3px}

/* â•â•â• STATS â€” NEW â•â•â• */
.stats-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:.4rem;margin-bottom:1rem}
@media(min-width:500px){.stats-grid{grid-template-columns:repeat(4,1fr)}}
.stat-card{background:var(--bg3);border:1px solid var(--brd);border-radius:var(--r);padding:.6rem;text-align:center}
.sc-icon{font-size:1.3rem}
.sc-val{font:700 1rem var(--f-display);color:var(--mint);margin:.2rem 0}
.sc-label{font-size:.6rem;color:var(--t3)}
.stats-xp,.stats-missions{background:var(--bg3);border:1px solid var(--brd);border-radius:var(--r);padding:.6rem;margin-bottom:.75rem}
.stats-xp h3,.stats-missions h3{font:.7rem var(--f-display);color:var(--mint);margin-bottom:.4rem}
.xpb-row{display:flex;justify-content:space-between;padding:.2rem 0;font-size:.75rem;border-bottom:1px solid var(--brd)}
.xpb-row:last-child{border:none}
.xpb-row strong{color:var(--mint)}
.sm-row{display:flex;align-items:center;gap:.4rem;padding:.3rem 0;border-bottom:1px solid var(--brd);font-size:.7rem}
.sm-row:last-child{border:none}
.sm-icon{font-size:1rem;flex-shrink:0;width:1.5rem;text-align:center}
.sm-name{flex:1;min-width:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
.sm-obj,.sm-read,.sm-quiz{font:.55rem var(--f-mono);color:var(--t3);flex-shrink:0}

/* â•â•â• TOAST â•â•â• */
.toast-wrap{position:fixed;top:60px;right:.5rem;z-index:1000;display:flex;flex-direction:column;gap:.3rem;max-width:320px}
.toast{padding:.5rem .75rem;border-radius:var(--r);font-size:.75rem;background:var(--bg4);border:1px solid var(--brd);opacity:0;transform:translateX(100%);transition:all .3s}
.toast.show{opacity:1;transform:translateX(0)}
.t-success{border-color:var(--success);background:rgba(46,213,115,.15)}
.t-warning{border-color:var(--warning);background:rgba(255,165,2,.15)}
.t-error{border-color:var(--danger);background:rgba(255,71,87,.15)}
.t-info{border-color:var(--info);background:rgba(0,217,255,.15)}

/* â•â•â• RESPONSIVE NAV â•â•â• */
@media(min-width:600px){
  .hub-stats{grid-template-columns:repeat(4,1fr)}
}
@media(min-width:900px){
  .bnav{position:static;border-top:none;border-bottom:1px solid var(--brd);flex-direction:row;padding-bottom:0}
  .bnav-btn{flex-direction:row;gap:4px;font-size:.7rem;min-height:40px}
  main{padding-bottom:1rem}
}

/* â•â•â• PRINT â•â•â• */
@media print{
  .header,.bnav,.toast-wrap,.hub-footer,.hub-actions,.fc-nav,.fc-rating,.back-btn{display:none!important}
  body{background:#fff;color:#000}
  .page{max-width:100%}
  .mo-content{display:block!important}
  .mo-content[hidden]{display:block!important}
}

</style>
</head>
<body>
<a class="skip-link" href="#main">Aller au contenu</a>

<header class="header" role="banner">
  <div class="hdr-logo" aria-label="RÃ©sistance Citoyenne">âš”ï¸ RC</div>
  <div class="xp-wrap" role="region" aria-label="Progression XP">
    <span id="xpIcon" class="xp-rank" aria-hidden="true">ğŸŒ±</span>
    <span id="xpRank" class="xp-rank">NÃ‰OPHYTE</span>
    <div class="xp-bar"><div id="xpFill" class="xp-fill" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="200"></div></div>
    <span class="xp-text"><span id="xpCur">0</span>/<span id="xpMax">200</span></span>
  </div>
  <div class="theme-dots" role="group" aria-label="ThÃ¨mes">
    <button data-th="dark" onclick="setTheme('dark')" aria-label="ThÃ¨me sombre" title="Sombre"></button>
    <button data-th="console" onclick="setTheme('console')" aria-label="ThÃ¨me console" title="Console"></button>
    <button data-th="neon" onclick="setTheme('neon')" aria-label="ThÃ¨me nÃ©on" title="NÃ©on"></button>
    <button data-th="80s" onclick="setTheme('80s')" aria-label="ThÃ¨me 80s" title="80s"></button>
  </div>
</header>

<main id="main" tabindex="-1" role="main" aria-live="polite"></main>

<nav class="bnav" role="navigation" aria-label="Navigation principale">
  <button class="bnav-btn active" data-v="hub" onclick="nav('hub')" aria-label="Quartier GÃ©nÃ©ral" aria-current="page"><span class="ico" aria-hidden="true">ğŸ </span>QG</button>
  <button class="bnav-btn" data-v="missions" onclick="nav('missions')" aria-label="Missions"><span class="ico" aria-hidden="true">ğŸ¯</span>Missions</button>
  <button class="bnav-btn" data-v="tools" onclick="nav('tools')" aria-label="Outils"><span class="ico" aria-hidden="true">ğŸ› ï¸</span>Outils</button>
  <button class="bnav-btn" data-v="flashcards" onclick="nav('flashcards')" aria-label="Flashcards"><span class="ico" aria-hidden="true">ğŸ“š</span>Flashcards</button>
  <button class="bnav-btn" data-v="trophies" onclick="nav('trophies')" aria-label="TrophÃ©es"><span class="ico" aria-hidden="true">ğŸ†</span>TrophÃ©es</button>
</nav>

<div id="toasts" class="toast-wrap" aria-live="polite"></div>

<script>
(function(){
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// RÃ‰SISTANCE CITOYENNE v3 â€” DATA (enrichi: contenu objectifs, quiz, prefill)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

var RANKS = [
  {name:'NÃ‰OPHYTE',min:0,icon:'ğŸŒ±',color:'#888'},
  {name:'INITIÃ‰Â·E',min:200,icon:'ğŸ“–',color:'#2ed573'},
  {name:'ACTIVISTE',min:500,icon:'âœŠ',color:'#ffa502'},
  {name:'STRATÃˆGE',min:1200,icon:'ğŸ¯',color:'#00d9ff'},
  {name:'ARCHITECTE',min:2500,icon:'ğŸ—ï¸',color:'#c8a2ff'},
  {name:'MAÃTREÂ·SSE',min:4000,icon:'âš”ï¸',color:'#7fffd4'},
  {name:'LÃ‰GENDE',min:5500,icon:'ğŸ”¥',color:'#ff6ec7'}
];

var MISSIONS = [
  {
    id:'arizona',name:'DÃ©crypter l\'Arizona',icon:'ğŸ”',cat:'analyse',difficulty:2,xpBase:100,
    brief:'Le gouvernement Arizona (N-VA, MR, EngagÃ©s, CD&V, Vooruit) prÃ©pare 23 milliards d\'austÃ©ritÃ©. 30.122 personnes exclues du chÃ´mage dÃ¨s la Vague 1. DÃ©cryptez les 8 failles.',
    lore:'FÃ©vrier 2025. Bart De Wever forme la coalition Arizona aprÃ¨s 211 jours. L\'accord prÃ©voit la limitation Ã  24 mois â€” une rupture du contrat social belge construit depuis 1944.',
    objectives:[
      {id:'az1',text:'Identifier les 8 failles du budget Arizona',xp:20,
       content:'Les 8 failles identifiÃ©es :\n\n1. Transfert non-financÃ© vers les CPAS â€” Les 30.122 exclus atterrissent au CPAS, surcoÃ»t compensÃ© Ã  seulement 518â‚¬/personne/an (dÃ©risoire vs coÃ»t rÃ©el 15.000â‚¬).\n2. PiÃ¨ge du taux marginal >100% â€” Reprendre un emploi partiel fait perdre plus qu\'il ne rapporte.\n3. Sous-estimation coÃ»ts santÃ© â€” +30% consultations, +45% hospitalisations (KCE). Non budgÃ©tÃ©.\n4. Effet domino logement â€” Perte capacitÃ© locative â†’ expulsions â†’ hÃ©bergement d\'urgence.\n5. Perte recettes TVA et cotisations â€” Moins de consommation = moins de TVA. Cercle vicieux.\n6. CoÃ»t judiciaire â€” Recours massifs Art. 23, CEDH. Non provisionnÃ©.\n7. DÃ©crochage scolaire enfants â€” 1 enfant sur 4 en risque AROPE.\n8. IrrÃ©versibilitÃ© sociale â€” AprÃ¨s 6 mois d\'exclusion, retour chute de 60% Ã  15%.'},
      {id:'az2',text:'Documenter les 5 boucles de rÃ©troaction destructrices',xp:25,
       content:'5 boucles auto-entretenues :\n\nBoucle 1 â€” PrÃ©caritÃ© â†’ SantÃ© â†’ CoÃ»ts : Exclusion â†’ stress â†’ pathologies â†’ soins â†’ dÃ©penses INAMI non budgÃ©tÃ©es.\nBoucle 2 â€” Exclusion â†’ CPAS â†’ Communes : Perte allocation â†’ RIS â†’ surcoÃ»t communal â†’ hausse additionnels.\nBoucle 3 â€” ChÃ´mage â†’ Consommation â†’ Emploi : Moins de revenus â†’ moins de dÃ©penses â†’ fermetures â†’ plus de chÃ´mage.\nBoucle 4 â€” PrÃ©caritÃ© â†’ Logement â†’ Urgence : ImpayÃ©s â†’ expulsions â†’ hÃ©bergement 3Ã— plus cher.\nBoucle 5 â€” Stigmatisation â†’ Isolement â†’ InemployabilitÃ© : Cadrage Deborsu â†’ honte â†’ retrait â†’ perte rÃ©seau.'},
      {id:'az3',text:'Cartographier les 30.122 exclusions Vague 1',xp:15,
       content:'RÃ©partition gÃ©ographique Vague 1 (janvier 2026) :\n\nâ€¢ Bruxelles : ~8.500 (28%)\nâ€¢ Wallonie : ~14.000 (46%) â€” Hainaut et LiÃ¨ge principaux\nâ€¢ Flandre : ~7.600 (25%) â€” Anvers et Limbourg\n\nProfil type : 45-55 ans, faible qualification, problÃ¨mes de santÃ© non reconnus MLD.\nVagues suivantes : V2 (juil. 2026) +25.000 | V3 (janv. 2027) +35.000 | Total 2027 : ~90.000.'},
      {id:'az4',text:'Analyser le piÃ¨ge du taux marginal >100%',xp:20,
       content:'Le Â« piÃ¨ge Ã  l\'emploi Â» : chaque euro gagnÃ© fait perdre plus d\'un euro en allocations.\n\nCalcul rÃ©el (bÃ©nÃ©ficiaire RIS isolÃ© 1.263â‚¬/mois + emploi mi-temps 950â‚¬ brut) :\nâ€¢ Gain brut : +950â‚¬\nâ€¢ Perte RIS : -1.263â‚¬\nâ€¢ Perte BIM soins : ~-80â‚¬\nâ€¢ Perte tarif social Ã©nergie : ~-60â‚¬\nâ€¢ CoÃ»t transport/garde : ~-200â‚¬\nâ€¢ Bilan net : -653â‚¬/mois\n\nTravailler fait perdre 653â‚¬. MathÃ©matiquement irrationnel. Le budget Arizona ne prÃ©voit aucun lissage.'},
      {id:'az5',text:'Comparer Arizona vs ECP (24Kâ‚¬ vs 9,2 Mrdâ‚¬)',xp:20,
       content:'Arizona : 9,2 Mrdâ‚¬ de coupes, logique punitive, 90.000 exclusions, cadre contestÃ© Art.23, transfert CPAS massif, ROI nÃ©gatif.\nECP : 24.000â‚¬ pilote, logique inclusive, 978.000 bÃ©nÃ©ficiaires potentiels, cadre existant (ruling SDA + loi 2005), aucun transfert CPAS, ROI positif.\n\nL\'ECP coÃ»te 383.000Ã— moins et couvre 10Ã— plus de personnes.'}
    ],
    quiz:[
      {q:'Combien de personnes exclues en Vague 1?',choices:['10.000','30.122','50.000','90.000'],correct:1},
      {q:'Quel est le piÃ¨ge du taux marginal?',choices:['Gagner plus en travaillant','Perdre plus qu\'on ne gagne','Payer plus d\'impÃ´ts','Aucun effet'],correct:1},
      {q:'Compensation CPAS par personne/an?',choices:['5.000â‚¬','2.000â‚¬','518â‚¬','1.263â‚¬'],correct:2},
      {q:'AprÃ¨s 6 mois d\'exclusion, retour chute Ã ...',choices:['45%','30%','15%','5%'],correct:2}
    ],
    intel:[
      {label:'Exclusions V1',value:'30.122',color:'danger'},
      {label:'Exclusions 2027',value:'90.000 est.',color:'danger'},
      {label:'Budget austÃ©ritÃ©',value:'23 Mrdâ‚¬',color:'warning'},
      {label:'CoÃ»t/heure inactivitÃ©',value:'1Mâ‚¬/h',color:'warning'}
    ],
    tools:['swot','arbre','pourquoi'],
    prefill:{swot:{forces:'DonnÃ©es chiffrÃ©es solides, prÃ©cÃ©dents juridiques Art.23, soutien syndical',faiblesses:'Pas de relais mÃ©diatique, complexitÃ© du sujet, fatigue militante',opportunites:'Recours CC en cours, moratoire = fenÃªtre pression, Erasmus+ KA210',menaces:'Narratif assistanat, calendrier Arizona, fracturation syndicale'}},
    fcTags:['arizona','coalition','chÃ´mage','exclusion','cpas','budget']
  },
  {
    id:'deborsu',name:'Affaire Deborsu',icon:'ğŸ“º',cat:'media',difficulty:2,xpBase:80,
    brief:'RTL-TVI diffuse "Tous Fraudeurs" avec un ratio 120:1. Le documentaire stigmatise les allocataires pendant que l\'Arizona prÃ©pare les exclusions.',
    lore:'La synecdoque accusatoire â€” cas individuels Ã©rigÃ©s en symboles d\'un groupe â€” fabrique l\'ennemi intÃ©rieur prÃ©caire.',
    objectives:[
      {id:'db1',text:'DÃ©construire le cadrage Ã©pisodique',xp:20,
       content:'Le cadrage Ã©pisodique (Iyengar, 1991) prÃ©sente via des histoires individuelles plutÃ´t que des analyses systÃ©miques.\n\nDans Â« Tous Fraudeurs Â» : 120h tournÃ©es â†’ 1h diffusÃ©e (ratio 120:1). Aucun contexte structural : fraude rÃ©elle <3%, zÃ©ro expert sociologue.\n\nEffet cognitif : le spectateur attribue la responsabilitÃ© Ã  l\'individu (Â« il fraude par choix Â») plutÃ´t qu\'au systÃ¨me.\n\nAlternatif : Fraude sociale = 0,3% du budget vs fraude fiscale = 6-8% du PIB (30-50 Mrdâ‚¬). Rapport 1:200.'},
      {id:'db2',text:'Appliquer l\'analyse Herman-Chomsky',xp:25,
       content:'5 filtres de Herman & Chomsky (1988) appliquÃ©s Ã  RTL-TVI :\n\n1. PropriÃ©tÃ© : RTL Group/Bertelsmann â€” pas d\'intÃ©rÃªt Ã  questionner le modÃ¨le dominant.\n2. PublicitÃ© : Annonceurs fuient les contenus critiquant banques/entreprises.\n3. Sources : ContrÃ´leurs ONEM (rÃ©pressif) vs chercheurs IWEPS/DULBEA (analytique) â€” seuls les premiers sont invitÃ©s.\n4. Flak : Pression lobbies patronaux FEB/VOKA.\n5. IdÃ©ologie : Le Â« fraudeur social Â» remplace le Â« communiste Â» comme ennemi intÃ©rieur.\n\nRTL ne choisit pas consciemment â€” le systÃ¨me de filtres produit naturellement ce contenu (propagande sociologique d\'Ellul).'},
      {id:'db3',text:'RÃ©diger une plainte argumentÃ©e au CSA',xp:20,
       content:'Base lÃ©gale : Art. 9 Â§1 (dignitÃ©), Art. 9 Â§2 (discrimination), Art. 36 (honnÃªtetÃ© info) du dÃ©cret SMA.\n\nArguments :\n1. Ratio 120:1 = sÃ©lection tendancieuse (art. 36)\n2. Absence de contradiction\n3. Timing coordonnÃ© avec agenda Arizona\n4. Synecdoque accusatoire (art. 9 Â§2)\n5. Non-respect vie privÃ©e\n\nProcÃ©dure : plainte csa.be, 30 jours aprÃ¨s diffusion, rÃ©ponse sous 60 jours.'},
      {id:'db4',text:'Produire un contre-rÃ©cit sourcÃ©',xp:15,
       content:'Structure du contre-rÃ©cit :\n\n1. Les faits vs le rÃ©cit : Fraude sociale = 0,3%. Fraude fiscale = 200Ã— plus.\n2. Les vrais chiffres : 2,1M AROPE (18,3%). 2,4M BIM (21%). 58% Ã©tudiants insÃ©curitÃ© alimentaire.\n3. Les parcours de vie : DerriÃ¨re chaque Â« fraudeur Â» montrÃ©, 100 personnes en dÃ©tresse non montrÃ©es.\n4. L\'alternative : ECP qui transforme l\'inactivitÃ© en contribution.\n\nCanaux : ouaisfieu, RWLP, BAPN, LDH, rÃ©seaux sociaux.'}
    ],
    quiz:[
      {q:'Ratio de montage du documentaire?',choices:['10:1','60:1','120:1','200:1'],correct:2},
      {q:'Combien de filtres Herman-Chomsky?',choices:['3','5','7','10'],correct:1},
      {q:'Fraude sociale = quel % du budget?',choices:['3%','1%','0,3%','5%'],correct:2}
    ],
    intel:[
      {label:'Ratio montage',value:'120:1',color:'danger'},
      {label:'Belges AROPE',value:'2,1M (18,3%)',color:'warning'},
      {label:'Ã‰tudiants insÃ©curitÃ© alim.',value:'58%',color:'danger'},
      {label:'BIM',value:'2,4M (21% pop.)',color:'warning'}
    ],
    tools:['domino','message','alliance'],
    prefill:{message:{accroche:'Pour chaque Â« fraudeur Â» montrÃ© par RTL, 200 personnes en dÃ©tresse sont invisibilisÃ©es.',probleme:'Le documentaire utilise un ratio 120:1 sans contexte structural.',importance:'Fraude sociale = 0,3% du budget. Fraude fiscale = 200Ã— plus.',cible:'CSA, parlementaires FWB, journalistes',action:'DÃ©poser plainte CSA, diffuser contre-rÃ©cit, interpeller parlementaires'}},
    fcTags:['deborsu','mÃ©dia','fraude','rtl','csa','cadrage']
  },
  {
    id:'art23',name:'DÃ©fense Art. 23',icon:'âš–ï¸',cat:'juridique',difficulty:3,xpBase:120,
    brief:'L\'article 23 de la Constitution garantit la sÃ©curitÃ© sociale. Le standstill interdit toute rÃ©gression. Recours introduit le 29/10/2025.',
    lore:'Face Ã  l\'impuissance des urnes, le citoyen s\'est tournÃ© vers le juge. Le lawfare citoyen est l\'usage lÃ©gitime du droit.',
    objectives:[
      {id:'j1',text:'MaÃ®triser l\'Art. 23 et le standstill',xp:20,
       content:'Art. 23 : Â« Chacun a le droit de mener une vie conforme Ã  la dignitÃ© humaine Â» â€” garantit sÃ©curitÃ© sociale, santÃ©, aide sociale.\n\nStandstill (cliquet) : La Cour constitutionnelle interdit de rÃ©duire significativement le niveau de protection existant sans justification d\'intÃ©rÃªt gÃ©nÃ©ral.\n\nApplication Arizona : La limitation Ã  24 mois = rÃ©gression significative par rapport au systÃ¨me actuel (durÃ©e illimitÃ©e sous conditions). L\'Ã‰tat devra prouver la proportionnalitÃ©.'},
      {id:'j2',text:'Documenter les 4 plaintes CEDH en cours',xp:25,
       content:'4 procÃ©dures CEDH actives :\n\n1. Plainte Â« Climat social Â» (2025) â€” Art. 3 CEDH (traitements dÃ©gradants), inspirÃ©e arrÃªt Camara.\n2. Plainte Â« AccÃ¨s au juge Â» (2025) â€” Art. 6 CEDH, dÃ©lais de recours trop courts pour personnes prÃ©carisÃ©es.\n3. ArrÃªt Camara (2023) â€” Â« DÃ©faillance systÃ©mique Â» belge (demandeurs asile). PrÃ©cÃ©dent applicable.\n4. Klimaatzaak (2021) â€” Ã‰tat condamnÃ©, dÃ©cision non exÃ©cutÃ©e â†’ montre les limites.\n\nStratÃ©gie : saturation judiciaire coordonnÃ©e (CC + CEDH + tribunaux du travail).'},
      {id:'j3',text:'PrÃ©parer un dossier d\'interpellation communale',xp:20,
       content:'Bruxelles : 25 signatures (ordonnance 17/07/2020).\nWallonie : Art. L1122-14 CDLD, droit individuel.\n\nStructure : identification commune + calcul surcoÃ»t CPAS local + interpellation Conseil communal + question Ã©crite prÃ©alable + mobilisation signataires.\n\nExemple BXL : SurcoÃ»t = 87Mâ‚¬/an. Compensation fÃ©dÃ©rale = 3,1Mâ‚¬. DÃ©ficit = catastrophique.'},
      {id:'j4',text:'Identifier les prÃ©cÃ©dents juridiques',xp:15,
       content:'PrÃ©cÃ©dents clÃ©s :\n\nâ€¢ Klimaatzaak (2021) : Condamnation Ã‰tat pour inaction climatique. Non exÃ©cutÃ©.\nâ€¢ ArrÃªt Camara (CEDH 2023) : Â« DÃ©faillance systÃ©mique Â» belge.\nâ€¢ CC arrÃªt 135/2011 : Annulation d\'une rÃ©duction sociale disproportionnÃ©e (standstill).\nâ€¢ +9.000 condamnations de l\'Ã‰tat belge â€” pattern systÃ©mique, pas erreurs isolÃ©es.'},
      {id:'j5',text:'RÃ©diger une pÃ©tition fÃ©dÃ©rale (objectif 25K)',xp:20,
       content:'Art. 28 Constitution : 25.000+ signatures = dÃ©bat parlementaire obligatoire.\n\nStructure : ExposÃ© des faits (limitation 24 mois, 90.000 exclusions, violation Art. 23) â†’ Demande (moratoire jusqu\'Ã  l\'arrÃªt CC) â†’ Signatures (nom, adresse, signature).\n\nCanaux : Change.org + collecte physique. Relais syndicaux FGTB (1,5M) + CSC.\nCalendrier : Avant Vague 2 (juillet 2026).'}
    ],
    quiz:[
      {q:'Art. 23 garantit le droit Ã ...',choices:['La libertÃ© d\'expression','La sÃ©curitÃ© sociale','Le vote obligatoire','La propriÃ©tÃ©'],correct:1},
      {q:'Standstill signifie...',choices:['Gel des salaires','Interdiction de rÃ©gression','ArrÃªt des nÃ©gocias','Statu quo'],correct:1},
      {q:'Signatures nÃ©cessaires pour interpeller (BXL)?',choices:['10','25','100','500'],correct:1},
      {q:'Condamnations de l\'Ã‰tat belge?',choices:['+1.000','+5.000','+9.000','+15.000'],correct:2}
    ],
    intel:[
      {label:'Recours dÃ©posÃ©',value:'29/10/2025',color:'info'},
      {label:'ArrÃªt CC attendu',value:'Fin 2026',color:'warning'},
      {label:'Plaintes CEDH',value:'4 actives',color:'info'},
      {label:'Condamnations Ã‰tat',value:'+9.000',color:'danger'}
    ],
    tools:['checklist','smart','suivi'],
    prefill:{smart:{specifique:'Moratoire exclusions V2 (juillet 2026)',mesurable:'25.000 signatures + 3 interpellations communales',atteignable:'Oui avec relais syndicaux FGTB/CSC (1,5M membres)',relevant:'Protection Art. 23 + calendrier CC',temporel:'Avant 1er juillet 2026'}},
    fcTags:['art23','constitution','standstill','cedh','juridique']
  },
  {
    id:'troisguerres',name:'Les Trois Guerres Civiques',icon:'âš”ï¸',cat:'doctrine',difficulty:3,xpBase:150,
    brief:'ä¸‰ç§å…¬æ°‘æˆ˜æ³• â€” Transposition de la doctrine chinoise au combat civique belge. Opinion, DÃ©-sidÃ©ration, PrÃ©toire : trois fronts simultanÃ©s.',
    lore:'En 2003, la Commission militaire centrale de la RPC officialise les ä¸‰ç§æˆ˜æ³•. Notre rÃ©ponse : la mÃªme architecture, inversÃ©e.',
    objectives:[
      {id:'tg1',text:'Comprendre la Guerre du RÃ©cit (èˆ†è®ºæˆ˜)',xp:25,
       content:'Guerre du RÃ©cit (èˆ†è®ºæˆ˜ YÃºlÃ¹n zhÃ n) civique :\n\nâ€¢ OSINT citoyen : Collecter donnÃ©es publiques (SPF, BNB, Eurostat)\nâ€¢ Lead-dexing : Suivi nominatif de chaque Ã©lu (votes, dÃ©clarations, mandats)\nâ€¢ Contre-rÃ©cit documentÃ© : Pas d\'opinion â€” des faits sourcÃ©s, vÃ©rifiables\nâ€¢ Saturation informationnelle positive : Tellement de contenu factuel que le rÃ©cit dominant est noyÃ©\n\nOutils : ouaisfieu (70+ analyses), infographies, flashcards, datasets ouverts.'},
      {id:'tg2',text:'MaÃ®triser la DÃ©-sidÃ©ration (å¿ƒç†æˆ˜)',xp:25,
       content:'DÃ©-sidÃ©ration (å¿ƒç†æˆ˜ XÄ«nlÇ zhÃ n) = sortir de la paralysie :\n\nâ€¢ Ã‰ducation permanente : Rendre le complexe comprÃ©hensible\nâ€¢ MontÃ©e en compÃ©tence : De Â« je ne comprends rien Â» Ã  Â« je peux analyser Â»\nâ€¢ Pyramide DIKW : DonnÃ©es â†’ Information â†’ Connaissance â†’ Sagesse\nâ€¢ DÃ©sapprentissage : DÃ©construire les fausses Ã©vidences\n\nIndicateur : Le citoyen formÃ© explique le budget Arizona Ã  son voisin en 5 minutes.'},
      {id:'tg3',text:'Appliquer la Guerre du PrÃ©toire (æ³•å¾‹æˆ˜)',xp:25,
       content:'Guerre du PrÃ©toire (æ³•å¾‹æˆ˜ FÇlÇœ zhÃ n) â€” lawfare citoyen :\n\n1. Recours constitutionnel (Art. 23) â€” dÃ©posÃ© 29/10/2025\n2. Plaintes CEDH (Art. 3, 6, 14) â€” 4 actives\n3. Interpellations communales â€” 589 communes = 589 fronts\n4. PÃ©titions fÃ©dÃ©rales â€” 25K = dÃ©bat obligatoire\n5. Tribunaux du travail â€” recours individuels massifs\n6. Plainte CSA â€” volet Deborsu\n\nPrincipe : 1.000 recours individuels coordonnÃ©s > 1 recours collectif. L\'Ã‰tat a +9.000 condamnations.'},
      {id:'tg4',text:'Cartographier les synergies entre les 3 guerres',xp:25,
       content:'Les 3 guerres combinÃ©es :\n\nRÃ©cit â†’ PrÃ©toire : DonnÃ©es OSINT = piÃ¨ces Ã  conviction\nPrÃ©toire â†’ RÃ©cit : Condamnation = fait mÃ©diatique\nDÃ©-sidÃ©ration â†’ Les deux : Citoyen formÃ© peut tÃ©moigner, rÃ©diger, produire\n\nCycle vertueux : Veille â†’ Analyse â†’ Publication â†’ Mobilisation â†’ Recours â†’ Condamnation â†’ Nouveau cycle.\n\nPoint critique : Si un front s\'arrÃªte, les deux autres perdent. D\'oÃ¹ l\'infrastructure rÃ©siliente (11 plateformes).'},
      {id:'tg5',text:'Identifier les armes de la particratie',xp:25,
       content:'La particratie mÃ¨ne ses propres Â« trois guerres Â» :\n\nRÃ©cit : ContrÃ´le mÃ©dias (RTL/RTBF CA politisÃ©s), cadrage Ã©pisodique, novlangue (Â« activation Â» = exclusion).\nSidÃ©ration : ComplexitÃ© institutionnelle (6 parlements â†’ Â« pas ma compÃ©tence Â»), volume lÃ©gislatif (1.200+ pages/an).\nLawfare : Non-exÃ©cution condamnations, longueur procÃ©dures (CC 12-18 mois), coÃ»t accÃ¨s juge.\n\nNotre avantage : La particratie est lente, rigide, prÃ©visible. Le citoyen connectÃ© est rapide, agile, imprÃ©visible.'}
    ],
    quiz:[
      {q:'ä¸‰ç§æˆ˜æ³• se traduit par...',choices:['Trois stratÃ©gies','Trois guerres','Trois chemins','Trois doctrines'],correct:1},
      {q:'La DÃ©-sidÃ©ration vise Ã ...',choices:['Effrayer l\'adversaire','Sortir le citoyen de la paralysie','CrÃ©er de la confusion','Infiltrer'],correct:1},
      {q:'Avantage citoyen vs particratie?',choices:['Plus de budget','Plus rapide et agile','Plus nombreux','Plus d\'avocats'],correct:1}
    ],
    intel:[
      {label:'Doctrine',value:'ä¸‰ç§å…¬æ°‘æˆ˜æ³•',color:'info'},
      {label:'Guerre I',value:'RÃ©cit (èˆ†è®ºæˆ˜)',color:'mint'},
      {label:'Guerre II',value:'DÃ©-sidÃ©ration (å¿ƒç†æˆ˜)',color:'lilac'},
      {label:'Guerre III',value:'PrÃ©toire (æ³•å¾‹æˆ˜)',color:'warning'}
    ],
    tools:['pestel','theorie','acteurs'],prefill:{},
    fcTags:['trois guerres','doctrine','rÃ©cit','sidÃ©ration','prÃ©toire']
  },
  {
    id:'osint',name:'OSINT Citoyen',icon:'ğŸ”',cat:'renseignement',difficulty:2,xpBase:90,
    brief:'L\'intelligence en sources ouvertes transforme le citoyen passif en veilleur actif. Collectez, vÃ©rifiez, exploitez.',
    lore:'Le cycle : veille â†’ donnÃ©e â†’ preuve â†’ contentieux â†’ fait juridique â†’ rÃ©cit.',
    objectives:[
      {id:'os1',text:'MaÃ®triser la pyramide DIKW',xp:20,
       content:'D â€” DonnÃ©es : Chiffres bruts. Â« 30.122 Â» seul ne dit rien.\nI â€” Information : DonnÃ©e contextualisÃ©e. Â« 30.122 exclusions en janvier 2026. Â»\nK â€” Connaissance : Info analysÃ©e. Â« Ces exclusions coÃ»teront 87Mâ‚¬ aux CPAS car compensation = 518â‚¬/an vs coÃ»t 15.000â‚¬/an. Â»\nW â€” Sagesse : Connaissance opÃ©rationnalisÃ©e. Â« DÃ©poser recours CC AVANT Vague 1 + 25 interpellations simultanÃ©es. Â»\n\nChaque outil ouaisfieu fait monter d\'un cran. Flashcards = Dâ†’I. Analyses = Iâ†’K. Plaidoyers = Kâ†’W.'},
      {id:'os2',text:'Pratiquer le lead-dexing',xp:25,
       content:'Lead-dexing = suivi systÃ©matique et nominatif de chaque Ã©lu.\n\nSuivre : Votes plÃ©niÃ¨re/commission, dÃ©clarations vs votes (incohÃ©rences), mandats cumulÃ©s, prÃ©sences.\n\nSources belges : lachambre.be (comptes-rendus), transparencia.be (mandats/rÃ©munÃ©rations), CRISP, Moniteur belge.\n\n31.806 mandataires (1/kmÂ²). Objectif : fiche par dÃ©putÃ© Arizona (89 fÃ©dÃ©raux) avec historique de vote.'},
      {id:'os3',text:'Exploiter les donnÃ©es ouvertes belges',xp:20,
       content:'Sources : SPF/Statbel (dÃ©mographie, AROPE), BNB (macro), Bureau du Plan (projections), IWEPS (Wallonie), IBSA (Bruxelles), Eurostat (comparaisons), KCE (santÃ©), INAMI, ONEM.\n\nFormat : API ou exports CSV/Excel. Tout tÃ©lÃ©chargeable, vÃ©rifiable, citeable en justice.\n\nPrincipe : Ne jamais affirmer sans source. Chaque chiffre doit pointer vers une URL institutionnelle.'},
      {id:'os4',text:'Produire un rapport OSINT admissible en justice',xp:25,
       content:'CritÃ¨res admissibilitÃ© :\n\n1. TraÃ§abilitÃ© : source URL + date + capture horodatÃ©e\n2. MÃ©thodologie documentÃ©e : comment, par qui, quand, quels outils\n3. ChaÃ®ne de custody : hash SHA-256 de chaque document\n4. Contradiction : mentionner aussi les donnÃ©es contraires\n5. Qualification : distinguer fait / dÃ©duction / opinion\n\nLes 70+ analyses ouaisfieu suivent cette mÃ©thodo. Chaque document est reproductible (ForkÂ·HackÂ·Spread).'}
    ],
    quiz:[
      {q:'DIKW signifie...',choices:['Data, Info, Knowledge, Wisdom','Direct, Indirect, Key, Wide','Design, Implement, Know, Win','Data, Index, Key, Write'],correct:0},
      {q:'Mandataires en Belgique?',choices:['10.000','21.000','31.806','45.000'],correct:2},
      {q:'Site pour mandats des Ã©lus?',choices:['lachambre.be','transparencia.be','moniteur.be','crisp.be'],correct:1}
    ],
    intel:[
      {label:'Documents ouaisfieu',value:'70+ analyses',color:'mint'},
      {label:'Plateformes',value:'11 sites',color:'info'},
      {label:'Mandataires BE',value:'31.806',color:'warning'},
      {label:'Budget ouaisfieu',value:'870â‚¬ total',color:'mint'}
    ],
    tools:['domino','fleur','acteurs'],prefill:{},
    fcTags:['osint','donnÃ©es','veille','dikw','mandataires']
  },
  {
    id:'commune',name:'Interpellation Communale',icon:'ğŸ›ï¸',cat:'action',difficulty:1,xpBase:70,
    brief:'Le niveau communal est le premier front accessible. Chaque citoyen peut interpeller son conseil communal.',
    lore:'La consultation populaire communale est ouverte dÃ¨s 16 ans, sans condition de nationalitÃ©.',
    objectives:[
      {id:'co1',text:'Identifier votre commune et ses procÃ©dures',xp:15,
       content:'Bruxelles : 25 signatures (ordonnance 17/07/2020), droit de poser questions orales.\nWallonie : Art. L1122-14 CDLD, droit individuel.\nFlandre : Decreet Lokaal Bestuur, pÃ©tition et interpellation.\n\nÃ‰tapes : 1. Identifier commune (ibz.be) 2. Consulter rÃ¨glement d\'ordre intÃ©rieur 3. Identifier procÃ©dure 4. Dates prochains conseils.'},
      {id:'co2',text:'RÃ©diger une interpellation Arizona locale',xp:20,
       content:'ModÃ¨le d\'interpellation :\n\nObjet : Impact limitation 24 mois sur le CPAS de [commune]\n\nConsidÃ©rant que : exclusion de [X] personnes, surcoÃ»t CPAS, compensation 518â‚¬/an = 3,5% du coÃ»t rÃ©el.\n\nQuestions : 1. Combien de personnes concernÃ©es? 2. SurcoÃ»t CPAS? 3. Budget prÃ©vu? 4. Mesures d\'accompagnement?\n\nDemande : Motion communale demandant un moratoire.'},
      {id:'co3',text:'Calculer le surcoÃ»t CPAS local',xp:20,
       content:'Formule : SurcoÃ»t = (Exclus Ã— CoÃ»t RIS) âˆ’ (Exclus Ã— Compensation fÃ©dÃ©rale)\n\nVariables : RIS isolÃ© = 15.156â‚¬/an. RIS cohabitant = 10.104â‚¬/an. Compensation = 518â‚¬/an. Transfert CPAS ~70%.\n\nExemple BXL 19 communes : Exclusions V1 ~8.500. Transfert CPAS (70%) ~5.950. SurcoÃ»t brut : 90,2Mâ‚¬. Compensation : 3,1Mâ‚¬. SurcoÃ»t net : ~87Mâ‚¬/an.'},
      {id:'co4',text:'Mobiliser les 25 signatures',xp:15,
       content:'Cercle 1 (1-10) : Famille, amis, voisins. Face-Ã -face 5 min/personne.\nCercle 2 (10-20) : RÃ©seau associatif, maison de quartier, comitÃ© parents.\nCercle 3 (20-25) : Stand lieu public, porte-Ã -porte ciblÃ©.\n\nDocuments : feuille signatures, rÃ©sumÃ© 1 page, infographie Â« Combien coÃ»tera Arizona Ã  notre commune? Â».\nCalendrier : 2 semaines, lancer 3 semaines avant le conseil visÃ©.'}
    ],
    quiz:[
      {q:'Signatures nÃ©cessaires (BXL)?',choices:['10','25','50','100'],correct:1},
      {q:'En Wallonie, combien de personnes?',choices:['1 (individuel)','10','25','50'],correct:0},
      {q:'CoÃ»t RIS isolÃ© annuel?',choices:['8.000â‚¬','12.000â‚¬','15.156â‚¬','20.000â‚¬'],correct:2}
    ],
    intel:[
      {label:'Seuil BXL',value:'25 personnes',color:'info'},
      {label:'Seuil Wallonie',value:'Art. L1122-14',color:'info'},
      {label:'SurcoÃ»t CPAS BXL',value:'87Mâ‚¬',color:'danger'},
      {label:'Compensation/an',value:'518â‚¬',color:'danger'}
    ],
    tools:['smart','checklist','message'],prefill:{},
    fcTags:['commune','cpas','interpellation','signatures']
  },
  {
    id:'ecp',name:'Ã‰conomie Contributive',icon:'ğŸŒ±',cat:'alternative',difficulty:2,xpBase:100,
    brief:'L\'ECP propose : transformer 978.000 inactifs contraints en contributeurs valorisÃ©s sans perte de droits. Budget : 24.000â‚¬.',
    lore:'Le cadre existe : ruling SDA + loi volontariat 2005. L\'ECP ne coÃ»te pas â€” elle fait Ã©conomiser.',
    objectives:[
      {id:'ec1',text:'Comprendre le mÃ©canisme ECP',xp:20,
       content:'Principe : Permettre aux inactifs contraints (chÃ´mage LD, invaliditÃ©, RIS) de contribuer Ã  des projets d\'utilitÃ© sociale SANS perdre allocations.\n\nCadre lÃ©gal existant : Ruling fiscal SDA (sÃ©curisation statut), Loi 03/07/2005 (volontariat), Art. 100 Â§2 INAMI (reprise progressive invalides).\n\nExemples : NumÃ©risation archives, tutorat scolaire, jardins partagÃ©s, repair cafÃ©s, veille citoyenne.'},
      {id:'ec2',text:'Comparer Arizona (9,2 Mrdâ‚¬) vs ECP (24Kâ‚¬)',xp:20,
       content:'Arizona : 9,2 Mrdâ‚¬ coupes, punitive, 90.000 exclusions, contestÃ© Art.23, transfert CPAS, ROI nÃ©gatif.\nECP : 24.000â‚¬ pilote, inclusive, 978.000 potentiels, cadre existant, aucun transfert, ROI positif.\n\nL\'ECP coÃ»te 383.000Ã— moins et couvre 10Ã— plus de personnes. Le coÃ»t inactivitÃ© (1Mâ‚¬/h) rend toute alternative moins chÃ¨re que le statu quo.'},
      {id:'ec3',text:'Identifier les 978.000 inactifs contraints',xp:15,
       content:'ChÃ´meurs LD : ~180.000. Invalides/MLD : ~500.000. RIS/CPAS : ~150.000. NEET jeunes : ~80.000. DÃ©couragÃ©s : ~68.000.\n\nPas inactifs Â« par choix Â» mais par systÃ¨me : absence postes adaptÃ©s, formation, transport, garde enfants, santÃ© mentale.\n\nCoÃ»t total : 21-24 Mrdâ‚¬/an = 1Mâ‚¬/heure (allocations + soins supplÃ©mentaires + perte cotisations/TVA + coÃ»ts sociaux).'},
      {id:'ec4',text:'RÃ©diger un dossier ruling SDA',xp:25,
       content:'Structure : 1. Identification ASBL porteuse 2. Description activitÃ© (contributions citoyennes) 3. Question fiscale (dÃ©fraiements imposables?) 4. Analyse juridique (seuils 40,67â‚¬/jour, 1.626,69â‚¬/an) 5. Demande confirmation conservation statut social.\n\nDÃ©lai : rÃ©ponse sous 3 mois. DÃ©cision contraignante 5 ans.'},
      {id:'ec5',text:'Calculer le ROI citoyen',xp:20,
       content:'Ã‰conomies par contributeur/an : rÃ©duction soins -1.200â‚¬ (KCE), rÃ©duction CPAS -2.000â‚¬, rÃ©duction judiciaire -500â‚¬, gain TVA +800â‚¬. Total ~4.500â‚¬/contributeur.\n\n100 contributeurs = 450Kâ‚¬ Ã©conomies pour 24Kâ‚¬ investis â†’ ROI 18,75Ã—.\n10.000 contributeurs = 45Mâ‚¬.\n978.000 = 4,4 Mrdâ‚¬/an = 18% du coÃ»t inactivitÃ© actuel.'}
    ],
    quiz:[
      {q:'CoÃ»t inactivitÃ© par heure?',choices:['100Kâ‚¬','500Kâ‚¬','1Mâ‚¬','5Mâ‚¬'],correct:2},
      {q:'Inactifs contraints?',choices:['200.000','500.000','978.000','1.500.000'],correct:2},
      {q:'Ruling SDA valable combien d\'annÃ©es?',choices:['1','3','5','10'],correct:2}
    ],
    intel:[
      {label:'Inactifs contraints',value:'978.000',color:'danger'},
      {label:'CoÃ»t inactivitÃ©',value:'1Mâ‚¬/h',color:'danger'},
      {label:'Budget ECP',value:'24.000â‚¬',color:'mint'},
      {label:'Cadre lÃ©gal',value:'Ruling SDA + Loi 2005',color:'info'}
    ],
    tools:['theorie','swot','smart'],prefill:{},
    fcTags:['ecp','contributive','inactivitÃ©','ruling']
  },
  {
    id:'coalition',name:'Construction Coalition',icon:'ğŸ¤',cat:'strategie',difficulty:2,xpBase:90,
    brief:'Cartographiez les alliÃ©s : syndicats (3M membres), associations, acadÃ©miques. Construisez un front commun.',
    lore:'Le modÃ¨le des Trois Guerres exige l\'intÃ©gration Ã©ducation populaire + plaidoyer + communication.',
    objectives:[
      {id:'cl1',text:'Cartographier alliÃ©s / neutres / opposants',xp:20,
       content:'AlliÃ©s actifs : FGTB (~1,5M), CSC (~1,6M), RWLP, BAPN, LDH, DULBEA, IWEPS, Solidaris, MC.\nNeutres Ã  basculer : DÃ©putÃ©s Vooruit/EngagÃ©s sensibles, RTBF Investigation, CPAS (impactÃ©s mais prudents).\nOpposants : N-VA (architecte), MR (alignÃ©), FEB/VOKA (lobbies patronaux), RTL-TVI.'},
      {id:'cl2',text:'Identifier 3-5 dÃ©putÃ©s Ã  basculer',xp:25,
       content:'Coalition Ã©troite â†’ 3-5 voix qui basculent = blocage.\n\nVooruit : DÃ©putÃ©s ex-syndicalistes, mal Ã  l\'aise avec limitation. Levier : contradiction programme/vote. MÃ©thode : lead-dexing public.\nEngagÃ©s : DÃ©putÃ©s sociaux-chrÃ©tiens. Levier : Art. 23 = doctrine sociale. MÃ©thode : interpellations ciblÃ©es.\n\nStratÃ©gie : pas d\'attaque frontale â€” montrer que voter la mesure sera Ã©lectoralement coÃ»teux. Fournir donnÃ©es CPAS locales.'},
      {id:'cl3',text:'RÃ©diger un protocole de partenariat',xp:20,
       content:'Engagements ouaisfieu : analyses sourcÃ©es, infrastructure numÃ©rique, animation EP, licence CC-BY-SA.\nEngagements partenaire : relais rÃ©seau, locaux pour ateliers, co-signature interpellations, soutien candidatures.\nGouvernance : comitÃ© trimestriel, Ã©valuation semestrielle, droit de retrait.\nBudget commun : 0â‚¬ (principe ouaisfieu).'},
      {id:'cl4',text:'Trouver un partenaire Erasmus+ KA210',xp:25,
       content:'KA210 : 30-60Kâ‚¬ forfait, 6-24 mois, 2+ organisations de 2+ pays UE.\n\nPistes : France (ATD, Anticor), Pays-Bas (Open State Foundation), Allemagne (Abgeordnetenwatch), Espagne (Civio, Xnet).\n\nDeadline : 5 mars 2026. Taux succÃ¨s ~80% pour premiers dÃ©pÃ´ts.\nAction : contacter 5 organisations cette semaine.'}
    ],
    quiz:[
      {q:'Membres syndicaux FGTB+CSC?',choices:['500K','1M','3M','5M'],correct:2},
      {q:'Budget Erasmus+ KA210?',choices:['10-20Kâ‚¬','30-60Kâ‚¬','100-200Kâ‚¬','500Kâ‚¬+'],correct:1},
      {q:'Deadline Erasmus+ en cours?',choices:['1er fÃ©vrier','5 mars 2026','15 avril','1er juin'],correct:1}
    ],
    intel:[
      {label:'Membres syndicaux',value:'~3M (FGTB+CSC)',color:'info'},
      {label:'DÃ©putÃ©s Ã  cibler',value:'3-5',color:'warning'},
      {label:'Erasmus+ KA210',value:'30-60Kâ‚¬',color:'mint'},
      {label:'Deadline',value:'5 mars 2026',color:'danger'}
    ],
    tools:['alliance','acteurs','cibles'],prefill:{},
    fcTags:['coalition','syndicats','partenariat','erasmus']
  },
  {
    id:'particratie',name:'Anatomie de la Particratie',icon:'ğŸ°',cat:'analyse',difficulty:3,xpBase:120,
    brief:'31.806 mandataires, financement public >80%, listes bloquÃ©es. DÃ©construisez le systÃ¨me.',
    lore:'Le citoyen = Â« bÃ©tail de vote Â» (stemvee). 75-80% de dÃ©fiance envers les partis.',
    objectives:[
      {id:'pa1',text:'Comprendre pilarisation et consociationalisme',xp:20,
       content:'Pilarisation (verzuiling) : sociÃ©tÃ© organisÃ©e en piliers (catholique, socialiste, libÃ©ral), chacun avec Ã©coles, hÃ´pitaux, syndicats, mÃ©dias.\n\nConsociationalisme (Lijphart 1968) : stabilitÃ© par nÃ©gociation entre Ã©lites. Ce qui Ã©tait pacification est devenu contrÃ´le â€” les partis se partagent le pouvoir entre eux plutÃ´t qu\'avec les citoyens.'},
      {id:'pa2',text:'Analyser le financement public (>80%)',xp:20,
       content:'>80% financement public (2Ã— Allemagne, 3Ã— France). ~70Mâ‚¬/an dotation fÃ©dÃ©rale. N-VA ~12Mâ‚¬, PS ~10Mâ‚¬, MR ~9Mâ‚¬.\n\nConsÃ©quence : Les partis ne dÃ©pendent pas des citoyens financiÃ¨rement. Circuit fermÃ© d\'auto-financement.\n\nComparaison : BE >80% | DE ~40% | FR ~25% | UK <5%.'},
      {id:'pa3',text:'Documenter le mille-feuille institutionnel',xp:15,
       content:'6 parlements + 6 gouvernements + 10 provinces + 589 communes.\n31.806 mandataires (1/365 hab, 1/kmÂ²). Chevauchement compÃ©tences permanent. Â« Pas ma compÃ©tence Â» = excuse structurelle. Aucun rÃ©fÃ©rendum.\n\nComplexitÃ© = bouclier psychologique du systÃ¨me : conÃ§u pour dÃ©courager.'},
      {id:'pa4',text:'Comparer avec Suisse, Pays-Bas, Canada',xp:20,
       content:'Suisse : RÃ©fÃ©rendum initiative populaire (100K signatures), 4Ã—/an. Citoyen a le dernier mot.\nPays-Bas : DÃ©-pilarisÃ© depuis 1960. RÃ©fÃ©rendum consultatif aboli 2018.\nCanada : RÃ©fÃ©rendums possibles (QuÃ©bec), pÃ©titions avec rÃ©ponse obligatoire.\n\nBelgique : Aucun rÃ©fÃ©rendum, aucune initiative populaire, pÃ©tition = simple demande. Cumule contraintes sans contrepoids.'},
      {id:'pa5',text:'Identifier les verrous constitutionnels',xp:25,
       content:'5 verrous :\n1. Pas de rÃ©fÃ©rendum\n2. Listes bloquÃ©es de facto (dÃ©volution)\n3. MajoritÃ© spÃ©ciale (2/3 + groupes linguistiques)\n4. Sonnette d\'alarme (blocage par groupe)\n5. Formation gouvernement sans dÃ©lai (211 jours Arizona, 541 en 2010)\n\nLe systÃ¨me est verrouillÃ© de l\'intÃ©rieur. Les outils de changement sont contrÃ´lÃ©s par les bÃ©nÃ©ficiaires du statu quo.'}
    ],
    quiz:[
      {q:'Mandataires en Belgique?',choices:['10.000','21.000','31.806','50.000'],correct:2},
      {q:'Financement public partis belges?',choices:['>50%','>60%','>80%','>95%'],correct:2},
      {q:'Parlements en Belgique?',choices:['3','4','6','8'],correct:2}
    ],
    intel:[
      {label:'Mandataires',value:'31.806 (1/kmÂ²)',color:'warning'},
      {label:'Financement public',value:'>80%',color:'danger'},
      {label:'DÃ©fiance partis',value:'75-80%',color:'danger'},
      {label:'Parlements',value:'6',color:'info'}
    ],
    tools:['pestel','arbre','fleur'],prefill:{},
    fcTags:['particratie','mandataires','financement','pilarisation']
  },
  {
    id:'financement',name:'Chasse aux Financements',icon:'ğŸ’°',cat:'logistique',difficulty:1,xpBase:80,
    brief:'Budget actuel : 870â‚¬ sur 2,5 ans. SÃ©curiser des financements sans compromettre l\'indÃ©pendance.',
    lore:'Le moratoire EP 2026-2028 bloque la voie principale. Mais des alternatives existent.',
    objectives:[
      {id:'fi1',text:'Ã‰valuer les 6 pistes de financement',xp:15,
       content:'PCI FWB : 5-35Kâ‚¬ (95% prob.) | Erasmus+ KA210 : 30-60Kâ‚¬ (80%) | CERV : 50-300Kâ‚¬ (75%) | FRB : 3,75-50Kâ‚¬ (85%) | DÃ©cret OJ : 5-20Kâ‚¬ (60%) | Crowdfunding : 1-25Kâ‚¬ (variable).\n\nStratÃ©gie : postuler simultanÃ©ment PCI + FRB + Erasmus (diversification).'},
      {id:'fi2',text:'RÃ©diger un dossier PCI FWB',xp:20,
       content:'PCI (Projet CohÃ©sion & Inclusion) : 5-35Kâ‚¬, taux 95%, appel permanent.\n\nStructure : Identification + Description + Budget + Calendrier + Indicateurs.\n\nPoints forts ouaisfieu : 2,5 ans de production, mÃ©thodologie innovante (IA civile), coÃ»t opÃ©rationnel = 0â‚¬, impact mesurable.'},
      {id:'fi3',text:'PrÃ©parer candidature Erasmus+ KA210',xp:25,
       content:'KA210 : 30-60Kâ‚¬ forfait, 2+ organisations de 2+ pays UE, 6-24 mois.\n\nCritÃ¨res : Pertinence (25%), QualitÃ© plan (30%), Partenariat (20%), Impact (25%). Score min : 60/100.\n\nPartenaire nÃ©cessaire dans autre pays UE. Deadline : 5 mars 2026.'},
      {id:'fi4',text:'Contacter la Fondation Roi Baudouin',xp:15,
       content:'FRB : Fonds dÃ©mocratie (3,75-50Kâ‚¬), appels Participation citoyenne et PauvretÃ©/exclusion.\n\nAtouts : Innovation, faible coÃ»t, reproductibilitÃ©.\nProcessus : dossier en ligne, jury, rÃ©ponse 2-3 mois.\nContact : info@kbs-frb.be | +32 2 511 18 40.'},
      {id:'fi5',text:'Lancer un crowdfunding',xp:15,
       content:'Plateformes : KissKissBankBank, Ulule, GoFundMe. Objectif rÃ©aliste : 2.500-5.000â‚¬.\n\nCampagne : vidÃ©o 2min, contreparties (analyses, stickers, flashcards physiques), 30 jours.\n\nAvantage : financement + communication + mobilisation. Chaque donateur = ambassadeur.'}
    ],
    quiz:[
      {q:'Budget total ouaisfieu?',choices:['0â‚¬','870â‚¬','5.000â‚¬','25.000â‚¬'],correct:1},
      {q:'Taux financement PCI?',choices:['50%','75%','95%','100%'],correct:2},
      {q:'Budget KA210?',choices:['5-10Kâ‚¬','30-60Kâ‚¬','100-200Kâ‚¬','500Kâ‚¬+'],correct:1}
    ],
    intel:[
      {label:'PCI FWB',value:'5-35Kâ‚¬ (95%)',color:'mint'},
      {label:'Erasmus+ KA210',value:'30-60Kâ‚¬ (80%)',color:'mint'},
      {label:'CERV',value:'50-300Kâ‚¬ (75%)',color:'info'},
      {label:'FRB',value:'3,75-50Kâ‚¬ (85%)',color:'mint'}
    ],
    tools:['smart','suivi','domino'],prefill:{},
    fcTags:['financement','erasmus','pci','crowdfunding']
  },
  {
    id:'mld',name:'Dossier MLD',icon:'ğŸ¥',cat:'analyse',difficulty:2,xpBase:90,
    brief:'500.000+ MLD. Sanctions Ã—4. 218.000 dossiers rÃ©examinÃ©s. L\'Arizona vise les plus vulnÃ©rables.',
    lore:'La rÃ©activation forcÃ©e des MLD est l\'angle mort du dÃ©bat public.',
    objectives:[
      {id:'ml1',text:'Documenter les 218.000 dossiers rÃ©examinÃ©s',xp:20,
       content:'INAMI : rÃ©examen massif. Processus : convocation mÃ©decin-conseil â†’ Ã©valuation capacitÃ© rÃ©siduelle â†’ plan rÃ©intÃ©gration â†’ sanctions si non-coopÃ©ration.\n\nProblÃ¨mes : 65% pathologies multiples, mÃ©decins non-spÃ©cialistes, marchÃ© du travail inadaptÃ©.\n\nProjection INAMI : 100.000 retours. RÃ©alitÃ© (rÃ©fÃ©rence Pays-Bas) : 15-20.000 max.'},
      {id:'ml2',text:'Analyser le quadruplement des sanctions',xp:20,
       content:'Avant : 2,5% rÃ©duction. AprÃ¨s : 10% (Ã—4).\n\nImpact : indemnitÃ© isolÃ© ~1.200â‚¬/mois â†’ sanction passe de -30â‚¬ Ã  -120â‚¬. Pour personne sous seuil de pauvretÃ©, = catastrophe.\n\nProfil sanctionnÃ©s : 70% santÃ© mentale. Le Â« refus de coopÃ©rer Â» est souvent une incapacitÃ©. Non pris en compte.'},
      {id:'ml3',text:'Calculer l\'irrÃ©alisme des 100K retours',xp:20,
       content:'ExpÃ©rience Pays-Bas (2015) : taux retour effectif = 8% (vs 20% projetÃ©). AppliquÃ© BE : 8% Ã— 218.000 = 17.440.\n\nObstacles : inadÃ©quation offre/demande, Ã¢ge moyen 52 ans (discrimination >50 ans), pathologies rÃ©elles non rÃ©solubles par plan administratif.\n\nGain budgÃ©taire = illusoire.'},
      {id:'ml4',text:'RÃ©diger un plaidoyer patient-partenaire',xp:25,
       content:'ModÃ¨le MontrÃ©al (patient-partenaire).\n\nStructure : 1. DonnÃ©es (500K+ MLD, 218K rÃ©examinÃ©s, Ã—4 sanctions) 2. TÃ©moignages anonymisÃ©s 3. Alternative : rÃ©activation accompagnÃ©e 4. Demande : moratoire sanctions + Ã©valuation indÃ©pendante.\n\nCanaux : LUSS, Solidaris/MC, mÃ©decins gÃ©nÃ©ralistes, commission SantÃ©.\n\nArt. 100 Â§2 INAMI permet DÃ‰JÃ€ la reprise progressive â€” il suffit de l\'utiliser.'}
    ],
    quiz:[
      {q:'MLD en Belgique?',choices:['100K','250K','500K+','1M'],correct:2},
      {q:'Sanctions multipliÃ©es par...',choices:['2','3','4','5'],correct:2},
      {q:'Taux retour rÃ©aliste?',choices:['50K','30K','15-20K','5K'],correct:2}
    ],
    intel:[
      {label:'MLD',value:'500.000+',color:'danger'},
      {label:'Dossiers rÃ©examinÃ©s',value:'218.000',color:'danger'},
      {label:'Sanctions',value:'Ã—4 (â†’10%)',color:'danger'},
      {label:'Retours projetÃ©s',value:'100K (irrÃ©aliste)',color:'warning'}
    ],
    tools:['pourquoi','arbre','message'],prefill:{},
    fcTags:['mld','invaliditÃ©','inami','sanctions']
  },
  {
    id:'edperm',name:'Ã‰ducation Permanente',icon:'ğŸ“š',cat:'strategie',difficulty:2,xpBase:100,
    brief:'Viser la reconnaissance FWB d\'ici 2042. Le dÃ©cret 2003 dÃ©finit le cadre. ouaisfieu coche toutes les cases.',
    lore:'Le moratoire 2026-2028 bloque la voie directe. Mais on peut prÃ©parer le terrain.',
    objectives:[
      {id:'ep1',text:'Comprendre le dÃ©cret EP 2003 et ses 4 axes',xp:15,
       content:'4 axes : 1. Analyse critique (70+ analyses ouaisfieu) 2. Participation citoyenne (interpellations, pÃ©titions) 3. Ã‰mancipation (formation OSINT, Trois Guerres) 4. Exercice des droits (Art. 23, lawfare).\n\nTypes : Association EP (axe 1), Organisation EP (axes 1+2), Mouvement EP (4 axes). ouaisfieu vise Mouvement.'},
      {id:'ep2',text:'Analyser le moratoire 2026-2028',xp:20,
       content:'FWB : moratoire nouvelles reconnaissances EP 2026-2028. Raisons : contraintes budgÃ©taires, rationalisation secteur.\n\nConsÃ©quences : impossible de postuler avant 2029. Alternatives : opÃ©rateur reconnu, PCI, prÃ©paration dossier.'},
      {id:'ep3',text:'Identifier les alternatives',xp:20,
       content:'1. Partenariat PAC (plus grand mouvement EP, 100+ rÃ©gionales) â†’ ouaisfieu comme Â« projet de PAC Â».\n2. PCI FWB (5-35Kâ‚¬, appel permanent) â†’ prouver l\'impact sans reconnaissance.\n3. ASBL autonome â†’ produire 5 ans de preuves, postuler 2029-2031, reconnaissance 2035-2042.\n\nRecommandÃ© : combiner 1+2 (couverture PAC + financement PCI).'},
      {id:'ep4',text:'RÃ©diger le dossier de candidature EP',xp:25,
       content:'Structure : 1. PrÃ©sentation (historique, mission, Ã©quipe) 2. 4 axes (avec preuves documentÃ©es) 3. Public cible 4. MÃ©thodologie (ForkÂ·HackÂ·Spread, IA civile) 5. Implantation territoriale (11 plateformes + ateliers BXL) 6. Plan quinquennal.\n\nOÃ¹ : Bruxelles (Recyclart, Pianofabriek). Quand : candidature formelle dÃ¨s rÃ©ouverture (2029+).'},
      {id:'ep5',text:'Cartographier PAC et les mouvements existants',xp:20,
       content:'Mouvements reconnus : PAC (100+ rÃ©gionales, socialiste), Vie FÃ©minine (chrÃ©tien, 50K membres), Ã‰quipes Populaires, CESEP.\nOrganisations : Lire et Ã‰crire, Cultures & SantÃ©, Barricade.\n\nBudget total EP FWB : ~35Mâ‚¬/an.\n\nNiche ouaisfieu : intelligence civile numÃ©rique. Aucun opÃ©rateur fait civic tech + OSINT + IA. Argument diffÃ©renciant clÃ©.'}
    ],
    quiz:[
      {q:'Axes dÃ©cret EP 2003?',choices:['2','3','4','6'],correct:2},
      {q:'Moratoire EP...',choices:['2024-2025','2025-2027','2026-2028','2027-2030'],correct:2},
      {q:'Plus grand mouvement EP?',choices:['CESEP','Lire et Ã‰crire','PAC','Ã‰quipes Populaires'],correct:2}
    ],
    intel:[
      {label:'DÃ©cret',value:'17 juillet 2003',color:'info'},
      {label:'Moratoire',value:'2026-2028',color:'danger'},
      {label:'Objectif',value:'Reconnaissance 2042',color:'mint'},
      {label:'PAC',value:'Plus grand mvt EP',color:'info'}
    ],
    tools:['theorie','suivi','smart'],prefill:{},
    fcTags:['Ã©ducation permanente','dÃ©cret','moratoire','pac']
  }
];

var TOOLS = [
  {id:1,key:'domino',name:'Domino du Changement',icon:'ğŸ¯',phase:'voir',xp:50,fields:['vision','obstacles','ressources'],help:'Vision du changement, obstacles et ressources.'},
  {id:2,key:'profil',name:'Profil d\'Engagement',icon:'ğŸ‘¤',phase:'voir',xp:50,fields:['motivations','competences','temps','limites'],help:'Motivations, compÃ©tences, temps et limites du groupe.'},
  {id:3,key:'fleur',name:'Fleur de Pouvoir',icon:'ğŸŒ¸',phase:'voir',xp:50,fields:['identites','privileges','oppressions'],help:'IdentitÃ©s sociales, privilÃ¨ges, systÃ¨mes d\'oppression.'},
  {id:4,key:'acteurs',name:'Cartographie Acteurs',icon:'ğŸ—ºï¸',phase:'voir',xp:50,fields:['allies','opposants','neutres','cibles'],help:'AlliÃ©s, opposants, neutres, cibles prioritaires.'},
  {id:5,key:'swot',name:'Analyse SWOT',icon:'ğŸ“Š',phase:'juger',xp:75,fields:['forces','faiblesses','opportunites','menaces'],help:'Forces/Faiblesses internes, OpportunitÃ©s/Menaces externes.'},
  {id:6,key:'pestel',name:'Analyse PESTEL',icon:'ğŸŒ',phase:'juger',xp:75,fields:['politique','economique','social','technologique','environnemental','legal'],help:'Macro: Politique, Ã‰conomique, Social, Techno, Environnement, LÃ©gal.'},
  {id:7,key:'arbre',name:'Arbre Ã  ProblÃ¨mes',icon:'ğŸŒ³',phase:'juger',xp:75,fields:['probleme_central','causes','effets'],help:'ProblÃ¨me central, causes (racines), effets (branches).'},
  {id:8,key:'pourquoi',name:'Les 5 Pourquoi',icon:'â“',phase:'juger',xp:75,fields:['symptome','pq1','pq2','pq3','pq4','pq5'],help:'SymptÃ´me â†’ 5Ã— Pourquoi â†’ cause racine.'},
  {id:9,key:'theorie',name:'ThÃ©orie du Changement',icon:'ğŸ“',phase:'juger',xp:75,fields:['situation_actuelle','changement_vise','activites','resultats','impact'],help:'Situation â†’ activitÃ©s â†’ rÃ©sultats â†’ impact.'},
  {id:10,key:'alliance',name:'Avec / Sans / Contre',icon:'âš”ï¸',phase:'agir',xp:100,fields:['avec','sans','contre'],help:'Avec qui, sans qui, contre qui.'},
  {id:11,key:'smart',name:'Objectifs SMART',icon:'ğŸ¯',phase:'agir',xp:100,fields:['specifique','mesurable','atteignable','relevant','temporel'],help:'SpÃ©cifique, Mesurable, Atteignable, Relevant, Temporel.'},
  {id:12,key:'cibles',name:'Cibles & Alliances',icon:'ğŸª',phase:'agir',xp:100,fields:['cible_primaire','cible_secondaire','allies_potentiels','strategie'],help:'Cibles de plaidoyer et alliances.'},
  {id:13,key:'message',name:'Construction du Message',icon:'ğŸ“£',phase:'agir',xp:100,fields:['accroche','probleme','importance','cible','action'],help:'Accroche â†’ ProblÃ¨me â†’ Importance â†’ Cible â†’ Action.'},
  {id:14,key:'checklist',name:'Check-list Rencontre',icon:'ğŸ“‹',phase:'agir',xp:100,fields:['objectif','arguments','documents','questions','suivi'],help:'Objectif, arguments, documents, questions, suivi.'},
  {id:15,key:'suivi',name:'Suivi & Ã‰valuation',icon:'ğŸ“ˆ',phase:'agir',xp:100,fields:['indicateurs','sources','frequence','responsable','ajustements'],help:'Indicateurs, sources, frÃ©quence, responsables.'}
];

var ACHIEVEMENTS = [
  {id:'first_mission',name:'Premier Briefing',desc:'Ouvrir la liste des missions',icon:'ğŸ“‹',xp:15},
  {id:'first_obj',name:'PremiÃ¨re Victoire',desc:'ComplÃ©ter un objectif',icon:'âœ…',xp:25},
  {id:'first_read',name:'ApprentiÂ·e',desc:'Lire le contenu d\'un objectif',icon:'ğŸ“–',xp:20},
  {id:'mission_complete',name:'Mission Accomplie',desc:'Terminer une mission',icon:'ğŸ–ï¸',xp:100},
  {id:'quiz_pass',name:'Examen RÃ©ussi',desc:'RÃ©ussir un quiz (â‰¥60%)',icon:'ğŸ“',xp:50},
  {id:'quiz_perfect',name:'Score Parfait',desc:'100% Ã  un quiz',icon:'ğŸ’¯',xp:100},
  {id:'five_missions',name:'VÃ©tÃ©ranÂ·e',desc:'ComplÃ©ter 5 missions',icon:'â­',xp:200},
  {id:'all_missions',name:'RÃ©sistance Totale',desc:'ComplÃ©ter toutes les missions',icon:'ğŸ†',xp:500},
  {id:'first_tool',name:'Premier Outil',desc:'ComplÃ©ter un outil',icon:'ğŸ› ï¸',xp:50},
  {id:'all_tools',name:'Arsenal Complet',desc:'ComplÃ©ter les 15 outils',icon:'âš”ï¸',xp:300},
  {id:'voir_done',name:'Vision Claire',desc:'Tous les outils VOIR',icon:'ğŸ‘ï¸',xp:100},
  {id:'juger_done',name:'Jugement SÃ»r',desc:'Tous les outils JUGER',icon:'âš–ï¸',xp:100},
  {id:'agir_done',name:'Passage Ã  l\'Action',desc:'Tous les outils AGIR',icon:'âœŠ',xp:100},
  {id:'first_file',name:'Premier Fichier',desc:'Importer un fichier',icon:'ğŸ“',xp:15},
  {id:'collector',name:'Archiviste',desc:'10 fichiers',icon:'ğŸ“Š',xp:75},
  {id:'fc_session',name:'RÃ©vision',desc:'Terminer une session flashcards',icon:'ğŸ“š',xp:30},
  {id:'fc_master',name:'MÃ©moire Vive',desc:'100 cartes rÃ©visÃ©es',icon:'ğŸ§ ',xp:100},
  {id:'fc_perfect',name:'Sans Faute',desc:'Session parfaite (10+ cartes)',icon:'ğŸ’',xp:75},
  {id:'night_owl',name:'Hibou Citoyen',desc:'Travailler entre 0h et 5h',icon:'ğŸ¦‰',xp:50},
  {id:'exporter',name:'Sauvegarde',desc:'Exporter un projet',icon:'ğŸ’¾',xp:25},
  {id:'three_guerres',name:'ä¸‰ç§å…¬æ°‘æˆ˜æ³•',desc:'Mission Trois Guerres',icon:'âš”ï¸',xp:150},
  {id:'speed_run',name:'Blitz',desc:'3 objectifs en 5 minutes',icon:'âš¡',xp:75},
  {id:'explorer',name:'ExplorateurÂ·rice',desc:'Visiter toutes les sections',icon:'ğŸ§­',xp:50},
  {id:'prefill_used',name:'Contextualisation',desc:'Utiliser un outil prÃ©-rempli',icon:'ğŸ”—',xp:30}
];

var DEMO_FLASHCARDS = [
  {q:"Coalition Arizona â€” combien de partis?",a:"5 : N-VA, MR, EngagÃ©s, CD&V, Vooruit",tags:['arizona']},
  {q:"Premier ministre Arizona?",a:"Bart De Wever (N-VA)",tags:['arizona']},
  {q:"DurÃ©e max chÃ´mage aprÃ¨s rÃ©forme?",a:"24 mois",tags:['arizona']},
  {q:"Exclusions Vague 1?",a:"30.122 personnes",tags:['arizona']},
  {q:"Exclusions cumulÃ©es 2027?",a:"90.000 estimÃ©es",tags:['arizona']},
  {q:"Art. 23 â€” que garantit-il?",a:"Droit Ã  la sÃ©curitÃ© sociale, santÃ©, logement, travail, culture",tags:['art23']},
  {q:"Principe de standstill?",a:"Interdit toute rÃ©gression sociale",tags:['art23']},
  {q:"Date recours constitutionnel?",a:"29 octobre 2025",tags:['art23']},
  {q:"CoÃ»t inactivitÃ© par heure?",a:"1 million d'euros",tags:['ecp']},
  {q:"Inactifs contraints?",a:"978.000 personnes",tags:['ecp']},
  {q:"Budget ECP vs Arizona?",a:"24Kâ‚¬ vs 9,2 Mrdâ‚¬",tags:['ecp']},
  {q:"Belges AROPE?",a:"2,1M (18,3%)",tags:['arizona']},
  {q:"Mandataires belges?",a:"31.806 (1/kmÂ²)",tags:['particratie']},
  {q:"Financement public partis?",a:">80%",tags:['particratie']},
  {q:"Parlements en Belgique?",a:"6",tags:['particratie']},
  {q:"ä¸‰ç§å…¬æ°‘æˆ˜æ³•?",a:"Les Trois Guerres Civiques",tags:['trois guerres']},
  {q:"Guerre I civique?",a:"RÃ©cit (èˆ†è®ºæˆ˜) â€” OSINT, contre-narratifs",tags:['trois guerres']},
  {q:"Guerre II civique?",a:"DÃ©-sidÃ©ration (å¿ƒç†æˆ˜) â€” Ã©ducation permanente",tags:['trois guerres']},
  {q:"Guerre III civique?",a:"PrÃ©toire (æ³•å¾‹æˆ˜) â€” lawfare citoyen",tags:['trois guerres']},
  {q:"Ratio montage Deborsu?",a:"120:1",tags:['deborsu']},
  {q:"BIM?",a:"BÃ©nÃ©ficiaire Intervention MajorÃ©e â€” 2,4M",tags:['arizona']},
  {q:"Sanctions MLD multipliÃ©es par?",a:"4 (de 2,5% Ã  10%)",tags:['mld']},
  {q:"MLD en Belgique?",a:"500.000+",tags:['mld']},
  {q:"Seuil interpellation BXL?",a:"25 personnes",tags:['commune']},
  {q:"Compensation CPAS/an?",a:"518â‚¬ (dÃ©risoire)",tags:['commune']},
  {q:"SurcoÃ»t CPAS Bruxelles?",a:"~87Mâ‚¬/an",tags:['commune']},
  {q:"Moratoire Ã‰ducation Permanente?",a:"2026-2028",tags:['Ã©ducation permanente']},
  {q:"Budget total ouaisfieu?",a:"870â‚¬ sur 2,5 ans",tags:['financement']},
  {q:"Analyses produites?",a:"70+",tags:['osint']},
  {q:"Ã‰tudiants insÃ©curitÃ© alimentaire?",a:"58%",tags:['arizona']},
  {q:"MÃ©thodologie ouaisfieu?",a:"Fork Â· Hack Â· Spread",tags:['osint']},
  {q:"DIKW?",a:"DonnÃ©es â†’ Information â†’ Connaissance â†’ Sagesse",tags:['osint']},
  {q:"Pilarisation?",a:"Organisation en piliers confessionnels/idÃ©ologiques",tags:['particratie']},
  {q:"Consociationalisme?",a:"DÃ©mocratie consensus entre segments opposÃ©s",tags:['particratie']},
  {q:"Stemvee?",a:"Â« BÃ©tail de vote Â»",tags:['particratie']},
  {q:"Cadrage Ã©pisodique?",a:"Histoires individuelles (vs thÃ©matique: causes systÃ©miques)",tags:['deborsu']},
  {q:"Herman-Chomsky : combien de filtres?",a:"5 filtres de propagande",tags:['deborsu']},
  {q:"Klimaatzaak?",a:"Ã‰tat condamnÃ© pour inaction climatique (non exÃ©cutÃ©)",tags:['art23']},
  {q:"ArrÃªt Camara?",a:"DÃ©faillance systÃ©mique belge (CEDH 2023)",tags:['art23']},
  {q:"DÃ©cret EP â€” combien d'axes?",a:"4 : analyse, participation, Ã©mancipation, droits",tags:['Ã©ducation permanente']}
];

var QUOTES = [
  {t:"Il est plus facile de tromper les gens que de les convaincre qu'ils ont Ã©tÃ© trompÃ©s.",a:"Mark Twain"},
  {t:"Ce n'est pas une guerre de l'information, mais une guerre sur le sens de l'information.",a:"Civil Affairs Assoc."},
  {t:"Ne doutez jamais qu'un petit groupe de citoyens engagÃ©s puisse changer le monde.",a:"Margaret Mead"},
  {t:"L'injustice quelque part est une menace pour la justice partout.",a:"Martin Luther King Jr."},
  {t:"Le silence devient lÃ¢chetÃ© quand l'occasion exige de parler.",a:"Gandhi"},
  {t:"On ne subit pas l'avenir, on le fait.",a:"Georges Bernanos"},
  {t:"L'Ã©ducation permanente vise l'Ã©mancipation individuelle et collective.",a:"DÃ©cret 17/07/2003"},
  {t:"Le code est une arme. L'information est une munition.",a:"ouaisfieu"},
  {t:"Face Ã  l'impuissance des urnes, le citoyen s'est tournÃ© vers le juge.",a:"Analyse particratie"},
  {t:"La complexitÃ© n'est pas un bug, c'est le bouclier psychologique du systÃ¨me.",a:"Trois Guerres Civiques"},
  {t:"978.000 personnes ne sont pas inactives par choix. Elles sont inactives par systÃ¨me.",a:"Plaidoyer ECP"},
  {t:"Surveiller, Ã©veiller, contraindre.",a:"ä¸‰ç§å…¬æ°‘æˆ˜æ³•"},
  {t:"Chaque interaction doit faire monter dans la pyramide DIKW.",a:"Doctrine ouaisfieu"},
  {t:"Fork Â· Hack Â· Spread.",a:"MÃ©thodologie ouaisfieu"}
];

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// RÃ‰SISTANCE CITOYENNE v3 â€” GAME ENGINE
// Fixed: XP economy, quiz system, ARIA, content tracking
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

var SAVE_KEY='resistance_citoyenne_v3';

var STATE={
  xp:0, achievements:[], theme:'dark', view:'hub',
  missionId:null, toolId:null,
  completedObj:[], completedTools:[],
  toolData:{}, files:[], fcStats:{reviewed:0,sessions:0},
  readContent:[], // NEW: track which objective content has been read
  quizResults:{}, // NEW: {missionId: {score, total, passed}}
  project:{}, visitedViews:[], timestamps:[], totalTime:0,
  searchQuery:'' // NEW: global search
};

var fcState=null;

// â•â•â• UTILITIES â•â•â•
var _q=id=>document.getElementById(id);
var _qa=s=>document.querySelectorAll(s);
var esc=s=>{if(typeof s!=='string')return s||'';return s.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;');};

function toast(msg,type='info'){
  const c=_q('toasts');if(!c)return;
  const el=document.createElement('div');
  el.className=`toast t-${type}`;
  el.setAttribute('role','alert');
  el.setAttribute('aria-live','assertive');
  el.innerHTML=msg;
  c.appendChild(el);
  requestAnimationFrame(()=>el.classList.add('show'));
  setTimeout(()=>{el.classList.remove('show');setTimeout(()=>el.remove(),400);},3500);
}

function vibrate(ms=15){try{navigator.vibrate&&navigator.vibrate(ms)}catch(e){}}

// â•â•â• XP & RANKS â•â•â•
function getRank(xp){return[...RANKS].reverse().find(r=>(xp||STATE.xp)>=r.min)||RANKS[0];}
function getNextRank(xp){const idx=RANKS.findIndex(r=>r.name===getRank(xp).name);return RANKS[idx+1]||RANKS[RANKS.length-1];}
function addXP(amount){
  const old=getRank();STATE.xp+=amount;const nw=getRank();
  updateXPBar();
  if(nw.name!==old.name){toast(`ğŸ‰ <strong>Rang ${nw.icon} ${nw.name}</strong> dÃ©bloquÃ©!`,'success');vibrate(50);}
  save();
}
function updateXPBar(){
  const rank=getRank(),next=getNextRank();
  const pct=Math.min(((STATE.xp-rank.min)/(next.min-rank.min))*100,100);
  const el=_q('xpRank');if(el)el.textContent=rank.name;
  const bar=_q('xpFill');if(bar){bar.style.width=pct+'%';bar.setAttribute('aria-valuenow',STATE.xp);}
  const cur=_q('xpCur');if(cur)cur.textContent=STATE.xp;
  const mx=_q('xpMax');if(mx)mx.textContent=next.min;
  const ico=_q('xpIcon');if(ico)ico.textContent=rank.icon;
}

// â•â•â• ACHIEVEMENTS â•â•â•
function unlock(id){
  if(STATE.achievements.includes(id))return;
  const a=ACHIEVEMENTS.find(x=>x.id===id);if(!a)return;
  STATE.achievements.push(id);addXP(a.xp);
  toast(`ğŸ† <strong>${a.name}</strong> â€” ${a.desc} (+${a.xp}XP)`,'success');
  vibrate(30);save();
}

// â•â•â• CONTENT READING â€” NEW â•â•â•
function markContentRead(objId){
  if(STATE.readContent.includes(objId))return;
  STATE.readContent.push(objId);
  if(STATE.readContent.length===1)unlock('first_read');
  addXP(5); // +5XP per content read (recurring source!)
  toast('ğŸ“– Contenu Ã©tudiÃ© (+5XP)','info');
  save();
}

// â•â•â• OBJECTIVES â•â•â•
function completeObjective(objId){
  if(STATE.completedObj.includes(objId))return;
  STATE.completedObj.push(objId);
  let xp=0;
  MISSIONS.forEach(m=>{const o=m.objectives.find(x=>x.id===objId);if(o)xp=o.xp;});
  if(xp)addXP(xp);
  toast(`âœ… Objectif complÃ©tÃ© (+${xp}XP)`,'success');vibrate();

  STATE.timestamps.push(Date.now());
  const recent=STATE.timestamps.filter(t=>Date.now()-t<300000);
  if(recent.length>=3)unlock('speed_run');
  if(STATE.completedObj.length===1)unlock('first_obj');

  // Check mission completion â€” NOW AWARDS xpBase!
  MISSIONS.forEach(m=>{
    const allDone=m.objectives.every(o=>STATE.completedObj.includes(o.id));
    if(allDone&&!STATE.achievements.includes('mission_done_'+m.id)){
      // Award mission bonus XP (was never distributed before!)
      addXP(m.xpBase);
      toast(`ğŸ–ï¸ Mission "${m.name}" complÃ¨te! (+${m.xpBase}XP bonus)`,'success');
      unlock('mission_complete');
      if(m.id==='troisguerres')unlock('three_guerres');
      // Track per-mission completion (for preventing double xpBase)
      STATE.achievements.push('mission_done_'+m.id);
    }
  });

  const completedMissions=MISSIONS.filter(m=>m.objectives.every(o=>STATE.completedObj.includes(o.id)));
  if(completedMissions.length>=5)unlock('five_missions');
  if(completedMissions.length>=MISSIONS.length)unlock('all_missions');

  save();
  if(typeof renderCurrentView==='function')renderCurrentView();
}

function toggleObjective(objId){
  if(STATE.completedObj.includes(objId)){
    STATE.completedObj=STATE.completedObj.filter(x=>x!==objId);save();
    if(typeof renderCurrentView==='function')renderCurrentView();
  }else{completeObjective(objId);}
}

// â•â•â• QUIZ SYSTEM â€” NEW â•â•â•
function submitQuiz(missionId){
  const m=MISSIONS.find(x=>x.id===missionId);if(!m||!m.quiz)return;
  let score=0;
  m.quiz.forEach((q,i)=>{
    const sel=document.querySelector(`input[name="quiz_${i}"]:checked`);
    if(sel&&parseInt(sel.value)===q.correct)score++;
  });
  const total=m.quiz.length;
  const passed=score/total>=0.6;
  STATE.quizResults[missionId]={score,total,passed,date:Date.now()};

  if(passed){
    addXP(25);unlock('quiz_pass');
    if(score===total)unlock('quiz_perfect');
    toast(`ğŸ“ Quiz rÃ©ussi : ${score}/${total} (+25XP)`,'success');
  }else{
    toast(`Quiz : ${score}/${total} â€” 60% requis pour valider`,'warning');
  }
  save();
  if(typeof renderCurrentView==='function')renderCurrentView();
}

// â•â•â• TOOL COMPLETION â•â•â•
function completeTool(toolId){
  if(STATE.completedTools.includes(toolId))return;
  const t=TOOLS.find(x=>x.id===toolId);if(!t)return;
  STATE.completedTools.push(toolId);addXP(t.xp);
  toast(`ğŸ› ï¸ <strong>${t.name}</strong> complÃ©tÃ© (+${t.xp}XP)`,'success');
  if(STATE.completedTools.length===1)unlock('first_tool');
  const voir=TOOLS.filter(t=>t.phase==='voir').every(t=>STATE.completedTools.includes(t.id));
  const juger=TOOLS.filter(t=>t.phase==='juger').every(t=>STATE.completedTools.includes(t.id));
  const agir=TOOLS.filter(t=>t.phase==='agir').every(t=>STATE.completedTools.includes(t.id));
  if(voir)unlock('voir_done');if(juger)unlock('juger_done');if(agir)unlock('agir_done');
  if(STATE.completedTools.length>=15)unlock('all_tools');
  save();
}

function saveToolField(toolKey,field,value){
  if(!STATE.toolData[toolKey])STATE.toolData[toolKey]={};
  STATE.toolData[toolKey][field]=value;save();
}

// â•â•â• NAVIGATION â•â•â•
function nav(view,id){
  STATE.view=view;
  if(id!==undefined){
    if(view==='mission')STATE.missionId=id;
    if(view==='tool')STATE.toolId=id;
  }
  if(!STATE.visitedViews.includes(view))STATE.visitedViews.push(view);
  if(STATE.visitedViews.length>=6)unlock('explorer');
  renderCurrentView();
  window.scrollTo(0,0);
  // Focus management for accessibility
  setTimeout(()=>{const h=_q('main');if(h)h.focus();},100);
  save();
}

// â•â•â• PERSISTENCE â•â•â•
function save(){
  try{localStorage.setItem(SAVE_KEY,JSON.stringify({
    xp:STATE.xp,achievements:STATE.achievements,theme:STATE.theme,
    completedObj:STATE.completedObj,completedTools:STATE.completedTools,
    toolData:STATE.toolData,files:STATE.files,fcStats:STATE.fcStats,
    readContent:STATE.readContent,quizResults:STATE.quizResults,
    project:STATE.project,visitedViews:STATE.visitedViews,totalTime:STATE.totalTime
  }));}catch(e){console.error('Save:',e)}
}

function load(){
  try{const s=localStorage.getItem(SAVE_KEY);if(!s)return;
  const d=JSON.parse(s);
  Object.assign(STATE,{
    xp:d.xp||0,achievements:d.achievements||[],theme:d.theme||'dark',
    completedObj:d.completedObj||[],completedTools:d.completedTools||[],
    toolData:d.toolData||{},files:d.files||[],fcStats:d.fcStats||{reviewed:0,sessions:0},
    readContent:d.readContent||[],quizResults:d.quizResults||{},
    project:d.project||{},visitedViews:d.visitedViews||[],totalTime:d.totalTime||0
  });}catch(e){console.error('Load:',e)}
}

function resetAll(){
  if(!confirm('âš ï¸ RÃ©initialiser TOUTE la progression?'))return;
  localStorage.removeItem(SAVE_KEY);location.reload();
}

// â•â•â• THEMES â•â•â•
function setTheme(t){STATE.theme=t;document.documentElement.dataset.theme=t;_qa('[data-th]').forEach(b=>b.classList.toggle('active',b.dataset.th===t));save();}

// â•â•â• FILES â•â•â•
function handleFiles(fileList){
  Array.from(fileList).forEach(file=>{
    const reader=new FileReader();const ext=file.name.split('.').pop().toLowerCase();
    reader.onload=e=>{
      const content=e.target.result;let data=null;
      if(ext==='json'){try{data=JSON.parse(content)}catch{toast('JSON invalide','error');return}}
      else if(ext==='csv'){data=parseCSV(content)}else{data=content}
      STATE.files.push({id:Date.now()+Math.random(),name:file.name,type:ext,data,raw:content,created:new Date().toISOString()});
      unlock('first_file');if(STATE.files.length>=10)unlock('collector');
      toast(`âœ“ ${file.name} importÃ©`,'success');save();
      if(typeof renderCurrentView==='function')renderCurrentView();
    };reader.readAsText(file);
  });
}

function parseCSV(text){
  const lines=text.trim().split('\n');if(lines.length<2)return[];
  const headers=csvLine(lines[0]);
  return lines.slice(1).map(line=>{
    const vals=csvLine(line);const obj={};
    headers.forEach((h,i)=>{
      const hl=h.toLowerCase().trim();let key=h;
      if(['question','q','front','recto'].some(k=>hl.includes(k)))key='question';
      else if(['answer','rÃ©ponse','reponse','a','back','verso'].some(k=>hl.includes(k)))key='answer';
      obj[key]=vals[i]||'';
    });return obj;
  }).filter(r=>Object.values(r).some(v=>v.trim()));
}

function csvLine(line){
  const r=[];let c='',q=false;
  for(let i=0;i<line.length;i++){
    const ch=line[i];
    if(ch==='"'){if(q&&line[i+1]==='"'){c+='"';i++}else q=!q}
    else if((ch===','||ch===';')&&!q){r.push(c.trim());c=''}
    else c+=ch;
  }r.push(c.trim());return r;
}

function isFlashcardFile(f){return f.type==='csv'&&Array.isArray(f.data)&&f.data.length>0&&f.data[0].question&&f.data[0].answer;}

function loadDemoFlashcards(){
  const data=DEMO_FLASHCARDS.map(d=>({question:d.q,answer:d.a}));
  STATE.files.push({id:Date.now(),name:'flashcards-resistance-40.csv',type:'csv',data,raw:'q,a\n'+data.map(d=>`"${d.question}","${d.answer}"`).join('\n'),created:new Date().toISOString()});
  unlock('first_file');toast('ğŸ¯ 40 flashcards chargÃ©es!','success');save();renderCurrentView();
}

// â•â•â• EXPORT â•â•â•
function exportProject(){
  const data={version:'3.0',exported:new Date().toISOString(),state:{xp:STATE.xp,achievements:STATE.achievements,completedObj:STATE.completedObj,completedTools:STATE.completedTools,toolData:STATE.toolData,files:STATE.files,fcStats:STATE.fcStats,readContent:STATE.readContent,quizResults:STATE.quizResults,project:STATE.project}};
  const blob=new Blob([JSON.stringify(data,null,2)],{type:'application/json'});
  const a=document.createElement('a');a.href=URL.createObjectURL(blob);
  a.download=`resistance-projet-${new Date().toISOString().slice(0,10)}.json`;a.click();
  URL.revokeObjectURL(a.href);unlock('exporter');toast('ğŸ’¾ Projet exportÃ©!','success');
}

function importProject(){
  const input=document.createElement('input');input.type='file';input.accept='.json';
  input.onchange=e=>{const reader=new FileReader();reader.onload=ev=>{
    try{const d=JSON.parse(ev.target.result);if(d.state){Object.assign(STATE,d.state);save();renderCurrentView();updateXPBar();toast('âœ“ Projet importÃ©!','success');}}catch(err){toast('Fichier invalide','error')}
  };reader.readAsText(e.target.files[0]);};input.click();
}

// â•â•â• STATS HELPERS â€” NEW â•â•â•
function getStats(){
  const completedM=MISSIONS.filter(m=>m.objectives.every(o=>STATE.completedObj.includes(o.id)));
  const totalObj=MISSIONS.reduce((s,m)=>s+m.objectives.length,0);
  const quizDone=Object.keys(STATE.quizResults).length;
  const quizPassed=Object.values(STATE.quizResults).filter(r=>r.passed).length;
  const maxXP=MISSIONS.reduce((s,m)=>s+m.xpBase+m.objectives.reduce((ss,o)=>ss+o.xp,0),0)+TOOLS.reduce((s,t)=>s+t.xp,0)+ACHIEVEMENTS.reduce((s,a)=>s+a.xp,0);
  return{completedM:completedM.length,totalM:MISSIONS.length,doneObj:STATE.completedObj.length,totalObj,completedTools:STATE.completedTools.length,achievements:STATE.achievements.length,totalAchiev:ACHIEVEMENTS.length,readContent:STATE.readContent.length,quizDone,quizPassed,maxXP,fcReviewed:STATE.fcStats.reviewed,fcSessions:STATE.fcStats.sessions};
}

// â•â•â• INIT â•â•â•
function initEngine(){
  load();setTheme(STATE.theme);updateXPBar();
  const h=new Date().getHours();if(h>=0&&h<5)unlock('night_owl');
  setInterval(()=>{STATE.totalTime++;save();},60000);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// RÃ‰SISTANCE CITOYENNE v3 â€” APP (UI Rendering)
// New: content display, quiz, search, stats, ARIA, prefill tools
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

var quoteTimer=null;

function renderCurrentView(){
  const main=_q('main');if(!main)return;
  main.setAttribute('tabindex','-1');
  const v=STATE.view;
  _qa('.bnav-btn').forEach(b=>{b.classList.toggle('active',b.dataset.v===v||(b.dataset.v==='hub'&&v==='hub'));b.setAttribute('aria-current',b.classList.contains('active')?'page':'false');});
  switch(v){
    case 'hub':renderHub(main);break;
    case 'missions':renderMissions(main);break;
    case 'mission':renderMission(main);break;
    case 'tools':renderToolsList(main);break;
    case 'tool':renderToolEditor(main);break;
    case 'flashcards':renderFlashcards(main);break;
    case 'trophies':renderTrophies(main);break;
    case 'stats':renderStats(main);break;
    case 'quiz':renderQuiz(main);break;
    default:renderHub(main);
  }
}

// â•â•â• HUB â•â•â•
function renderHub(el){
  const rank=getRank(),next=getNextRank();
  const pct=Math.min(((STATE.xp-rank.min)/(next.min-rank.min))*100,100);
  const completedMissions=MISSIONS.filter(m=>m.objectives.every(o=>STATE.completedObj.includes(o.id)));
  const totalObj=MISSIONS.reduce((s,m)=>s+m.objectives.length,0);
  const q=QUOTES[Math.floor(Math.random()*QUOTES.length)];
  el.innerHTML=`
  <div class="hub">
    <div class="hub-header"><div class="hub-title">âš”ï¸ QUARTIER GÃ‰NÃ‰RAL</div><div class="hub-sub">RÃ©sistance Citoyenne â€” Intelligence Civile Belge</div></div>
    <div class="hub-rank-card" role="region" aria-label="Progression">
      <div class="rank-big">${rank.icon}</div>
      <div class="rank-info">
        <div class="rank-name" style="color:${rank.color}">${rank.name}</div>
        <div class="rank-bar" role="progressbar" aria-valuenow="${STATE.xp}" aria-valuemin="${rank.min}" aria-valuemax="${next.min}"><div class="rank-fill" style="width:${pct}%"></div></div>
        <div class="rank-xp">${STATE.xp} / ${next.min} XP</div>
      </div>
    </div>
    <div class="hub-stats" role="region" aria-label="Statistiques">
      <div class="hs"><div class="hs-v">${completedMissions.length}/${MISSIONS.length}</div><div class="hs-l">Missions</div></div>
      <div class="hs"><div class="hs-v">${STATE.completedObj.length}/${totalObj}</div><div class="hs-l">Objectifs</div></div>
      <div class="hs"><div class="hs-v">${STATE.completedTools.length}/15</div><div class="hs-l">Outils</div></div>
      <div class="hs"><div class="hs-v">${STATE.achievements.length}/${ACHIEVEMENTS.length}</div><div class="hs-l">TrophÃ©es</div></div>
    </div>
    <div class="hub-quote" role="complementary" aria-label="Citation"><div class="hq-text">"${esc(q.t)}"</div><div class="hq-author">â€” ${esc(q.a)}</div></div>
    <div class="hub-actions">
      <button class="hbtn hbtn-primary" onclick="nav('missions')" aria-label="Voir les missions">ğŸ¯ Missions</button>
      <button class="hbtn" onclick="nav('tools')" aria-label="Outils mÃ©thodologiques">ğŸ› ï¸ Outils</button>
      <button class="hbtn" onclick="nav('flashcards')" aria-label="Flashcards">ğŸ“š Flashcards</button>
      <button class="hbtn" onclick="nav('stats')" aria-label="Statistiques">ğŸ“Š Stats</button>
    </div>
    <div class="hub-section-title">âš¡ Missions en cours</div>
    <div class="hub-missions">
      ${MISSIONS.slice(0,4).map(m=>{
        const done=m.objectives.filter(o=>STATE.completedObj.includes(o.id)).length;
        const total=m.objectives.length;const p=Math.round((done/total)*100);
        return `<div class="hm-card" onclick="nav('mission','${m.id}')" role="button" tabindex="0" aria-label="${esc(m.name)}, ${done} sur ${total} objectifs">
          <div class="hm-icon">${m.icon}</div><div class="hm-info"><div class="hm-name">${esc(m.name)}</div>
          <div class="hm-bar" role="progressbar" aria-valuenow="${done}" aria-valuemax="${total}"><div class="hm-fill" style="width:${p}%"></div></div>
          <div class="hm-pct">${done}/${total}</div></div><div class="hm-arrow">â€º</div></div>`;
      }).join('')}
    </div>
    <div class="hub-footer">
      <button class="hbtn-sm" onclick="exportProject()" aria-label="Exporter projet">ğŸ’¾ Exporter</button>
      <button class="hbtn-sm" onclick="importProject()" aria-label="Importer projet">ğŸ“‚ Importer</button>
      <button class="hbtn-sm" onclick="resetAll()" aria-label="RÃ©initialiser">ğŸ—‘ï¸ Reset</button>
    </div>
  </div>`;
}

// â•â•â• MISSIONS LIST â•â•â•
function renderMissions(el){
  const cats=[...new Set(MISSIONS.map(m=>m.cat))];
  // Search
  const sq=STATE.searchQuery.toLowerCase();
  const filtered=sq?MISSIONS.filter(m=>m.name.toLowerCase().includes(sq)||m.brief.toLowerCase().includes(sq)||m.cat.includes(sq)):MISSIONS;
  el.innerHTML=`
  <div class="page">
    <div class="page-head">
      <button class="back-btn" onclick="nav('hub')" aria-label="Retour au QG">â† QG</button>
      <h2>ğŸ¯ Toutes les Missions</h2>
    </div>
    <div class="search-bar"><input type="search" id="missionSearch" placeholder="ğŸ” Rechercher une mission..." value="${esc(STATE.searchQuery)}" oninput="STATE.searchQuery=this.value;renderCurrentView()" aria-label="Rechercher"></div>
    <div class="page-sub">${filtered.length} mission${filtered.length>1?'s':''} â€¢ Toutes accessibles</div>
    <div class="cat-filter" id="catFilter" role="toolbar" aria-label="Filtres par catÃ©gorie">
      <button class="cf-btn active" onclick="filterMissions(null,this)" aria-pressed="true">Toutes</button>
      ${cats.map(c=>`<button class="cf-btn" onclick="filterMissions('${c}',this)" aria-pressed="false">${catLabel(c)}</button>`).join('')}
    </div>
    <div class="mission-grid" id="missionGrid">
      ${filtered.map(m=>{
        const done=m.objectives.filter(o=>STATE.completedObj.includes(o.id)).length;
        const total=m.objectives.length;const pct=Math.round((done/total)*100);const complete=done===total;
        return `<div class="m-card ${complete?'m-done':''}" data-cat="${m.cat}" onclick="nav('mission','${m.id}')" role="button" tabindex="0" aria-label="${esc(m.name)}, ${done} sur ${total}">
          <div class="m-top"><span class="m-icon">${m.icon}</span><span class="m-diff">${'â˜…'.repeat(m.difficulty)}${'â˜†'.repeat(3-m.difficulty)}</span></div>
          <div class="m-name">${esc(m.name)}</div><div class="m-cat">${catLabel(m.cat)}</div>
          <div class="m-bar"><div class="m-fill" style="width:${pct}%"></div></div>
          <div class="m-meta"><span>${done}/${total}</span><span class="m-xp">+${m.xpBase}XP</span></div>
          ${complete?'<div class="m-badge">âœ“ COMPLÃˆTE</div>':''}
        </div>`;
      }).join('')}
    </div>
  </div>`;
  unlock('first_mission');
}

function catLabel(c){return{analyse:'ğŸ” Analyse',media:'ğŸ“º MÃ©dia',juridique:'âš–ï¸ Juridique',doctrine:'âš”ï¸ Doctrine',renseignement:'ğŸ” OSINT',action:'ğŸ›ï¸ Action',alternative:'ğŸŒ± Alternative',strategie:'ğŸ¤ StratÃ©gie',logistique:'ğŸ’° Logistique'}[c]||c;}

function filterMissions(cat,btn){
  _qa('#catFilter .cf-btn').forEach(b=>{b.classList.remove('active');b.setAttribute('aria-pressed','false');});
  btn.classList.add('active');btn.setAttribute('aria-pressed','true');
  _qa('#missionGrid .m-card').forEach(c=>{c.style.display=(!cat||c.dataset.cat===cat)?'':'none';});
}

// â•â•â• SINGLE MISSION (with content display + quiz) â•â•â•
function renderMission(el){
  const m=MISSIONS.find(x=>x.id===STATE.missionId);
  if(!m){nav('missions');return;}
  const done=m.objectives.filter(o=>STATE.completedObj.includes(o.id)).length;
  const total=m.objectives.length;const pct=Math.round((done/total)*100);
  const complete=done===total;
  const qr=STATE.quizResults[m.id];

  el.innerHTML=`
  <div class="page">
    <div class="page-head">
      <button class="back-btn" onclick="nav('missions')" aria-label="Retour aux missions">â† Missions</button>
      <h2>${m.icon} ${esc(m.name)}</h2>
      ${complete?'<span class="done-badge">âœ“ COMPLÃˆTE</span>':''}
    </div>
    <div class="mission-brief"><div class="mb-label">BRIEFING</div><div class="mb-text">${esc(m.brief)}</div></div>
    <div class="mission-lore" onclick="this.classList.toggle('open')" role="button" tabindex="0" aria-expanded="false">
      <div class="ml-label">ğŸ“– Contexte <span class="ml-toggle">â–¼</span></div>
      <div class="ml-text">${esc(m.lore)}</div>
    </div>
    <div class="mission-intel"><div class="mi-label">ğŸ“Š RENSEIGNEMENTS</div>
      <div class="mi-grid">${m.intel.map(i=>`<div class="mi-card mi-${i.color}"><div class="mi-val">${i.value}</div><div class="mi-lbl">${esc(i.label)}</div></div>`).join('')}</div>
    </div>
    <div class="mission-progress">
      <div class="mp-bar" role="progressbar" aria-valuenow="${done}" aria-valuemax="${total}"><div class="mp-fill" style="width:${pct}%"></div></div>
      <div class="mp-text">${done}/${total} objectifs â€¢ ${pct}% â€¢ +${m.xpBase}XP bonus</div>
    </div>
    <div class="mission-objectives" role="list" aria-label="Objectifs">
      <div class="mo-label">ğŸ¯ OBJECTIFS</div>
      ${m.objectives.map(o=>{
        const isDone=STATE.completedObj.includes(o.id);
        const isRead=STATE.readContent.includes(o.id);
        const hasContent=!!o.content;
        return `<div class="mo-item ${isDone?'mo-done':''}" role="listitem">
          <div class="mo-header" onclick="toggleObjective('${o.id}')" role="checkbox" aria-checked="${isDone}" tabindex="0">
            <div class="mo-check">${isDone?'âœ…':'â¬œ'}</div>
            <div class="mo-text">${esc(o.text)}</div>
            <div class="mo-xp">+${o.xp}</div>
          </div>
          ${hasContent?`<div class="mo-content-toggle">
            <button class="mo-read-btn ${isRead?'read':''}" onclick="event.stopPropagation();toggleContent('${o.id}')" aria-expanded="false" aria-label="Lire le contenu">
              ${isRead?'ğŸ“–':'ğŸ“•'} ${isRead?'Relire':'Lire le contenu'}
            </button>
          </div>
          <div class="mo-content" id="content_${o.id}" hidden>
            <div class="mo-content-text">${formatContent(o.content)}</div>
          </div>`:''}
        </div>`;
      }).join('')}
    </div>

    ${m.quiz&&m.quiz.length?`
    <div class="mission-quiz-link">
      <button class="hbtn ${qr&&qr.passed?'hbtn-done':'hbtn-primary'}" onclick="STATE.view='quiz';STATE.missionId='${m.id}';renderCurrentView()" aria-label="Quiz de la mission">
        ${qr?`ğŸ“ Quiz ${qr.passed?'rÃ©ussi':'Ã©chouÃ©'} (${qr.score}/${qr.total})`:'ğŸ“ Passer le quiz de mission'}
      </button>
    </div>`:''}

    ${m.tools&&m.tools.length?`
    <div class="mission-tools"><div class="mt-label">ğŸ› ï¸ OUTILS RECOMMANDÃ‰S</div>
      <div class="mt-grid">${m.tools.map(tk=>{
        const t=TOOLS.find(x=>x.key===tk);if(!t)return'';
        const hasPrefill=m.prefill&&m.prefill[tk];
        return `<button class="mt-btn" onclick="openToolFromMission('${tk}','${m.id}')" aria-label="Outil ${t.name}${hasPrefill?' (prÃ©-rempli)':''}">
          ${t.icon} ${t.name} ${hasPrefill?'<span class="mt-prefill">ğŸ“‹</span>':''}
        </button>`;
      }).join('')}</div>
    </div>`:''}
  </div>`;
}

function formatContent(text){
  return esc(text).replace(/\n\n/g,'</p><p>').replace(/\n/g,'<br>').replace(/\*\*([^*]+)\*\*/g,'<strong>$1</strong>').replace(/^/,'<p>').replace(/$/,'</p>');
}

function toggleContent(objId){
  const el=_q('content_'+objId);if(!el)return;
  const btn=el.previousElementSibling?.querySelector('.mo-read-btn');
  if(el.hidden){
    el.hidden=false;
    if(btn){btn.setAttribute('aria-expanded','true');}
    markContentRead(objId);
  }else{
    el.hidden=true;
    if(btn){btn.setAttribute('aria-expanded','false');}
  }
}

function openToolFromMission(toolKey,missionId){
  const m=MISSIONS.find(x=>x.id===missionId);
  if(m&&m.prefill&&m.prefill[toolKey]){
    // Apply prefill data
    if(!STATE.toolData[toolKey])STATE.toolData[toolKey]={};
    const existing=STATE.toolData[toolKey];
    const prefill=m.prefill[toolKey];
    Object.keys(prefill).forEach(k=>{
      if(!existing[k]||existing[k].length<3)existing[k]=prefill[k];
    });
    save();
    unlock('prefill_used');
  }
  const t=TOOLS.find(x=>x.key===toolKey);
  if(t)nav('tool',t.id);
}

// â•â•â• QUIZ VIEW â€” NEW â•â•â•
function renderQuiz(el){
  const m=MISSIONS.find(x=>x.id===STATE.missionId);
  if(!m||!m.quiz){nav('mission',STATE.missionId);return;}
  const qr=STATE.quizResults[m.id];

  el.innerHTML=`
  <div class="page">
    <div class="page-head">
      <button class="back-btn" onclick="nav('mission','${m.id}')" aria-label="Retour Ã  la mission">â† ${esc(m.name)}</button>
      <h2>ğŸ“ Quiz</h2>
    </div>
    <div class="quiz-intro">RÃ©pondez Ã  ${m.quiz.length} questions. Minimum 60% pour valider.</div>
    <div class="quiz-questions" role="form" aria-label="Quiz">
      ${m.quiz.map((q,i)=>`
      <div class="quiz-q">
        <div class="qq-text">${i+1}. ${esc(q.q)}</div>
        <div class="qq-choices" role="radiogroup" aria-label="Question ${i+1}">
          ${q.choices.map((c,j)=>{
            const wasCorrect=qr?j===q.correct:false;
            const wasSelected=false;
            return `<label class="qq-choice ${qr&&wasCorrect?'qq-correct':''}" tabindex="0">
              <input type="radio" name="quiz_${i}" value="${j}" ${qr?'disabled':''}>
              <span>${esc(c)}</span>
            </label>`;
          }).join('')}
        </div>
      </div>`).join('')}
    </div>
    ${qr?`<div class="quiz-result ${qr.passed?'qr-pass':'qr-fail'}">
      ${qr.passed?'âœ…':'âŒ'} Score : ${qr.score}/${qr.total} (${Math.round(qr.score/qr.total*100)}%)
      ${qr.passed?'â€” Quiz validÃ©!':'â€” 60% requis. RÃ©essayez!'}
    </div>
    <button class="hbtn" onclick="delete STATE.quizResults['${m.id}'];save();renderCurrentView()">ğŸ”„ Recommencer</button>`
    :`<button class="hbtn hbtn-primary" onclick="submitQuiz('${m.id}')">âœ“ Valider</button>`}
  </div>`;
}

// â•â•â• TOOLS LIST â•â•â•
function renderToolsList(el){
  const phases=[{key:'voir',label:'ğŸ‘ï¸ VOIR',desc:'Observer et comprendre'},{key:'juger',label:'âš–ï¸ JUGER',desc:'Analyser et Ã©valuer'},{key:'agir',label:'âœŠ AGIR',desc:'Planifier et mettre en Å“uvre'}];
  el.innerHTML=`
  <div class="page">
    <div class="page-head">
      <button class="back-btn" onclick="nav('hub')" aria-label="Retour au QG">â† QG</button>
      <h2>ğŸ› ï¸ Outils MÃ©thodologiques</h2>
    </div>
    <div class="page-sub">15 outils â€¢ VOIR â†’ JUGER â†’ AGIR</div>
    ${phases.map(p=>`
    <div class="tp-section">
      <div class="tp-head"><span class="tp-name">${p.label}</span><span class="tp-desc">${p.desc}</span></div>
      <div class="tool-grid">${TOOLS.filter(t=>t.phase===p.key).map(t=>{
        const isDone=STATE.completedTools.includes(t.id);
        return `<div class="t-card ${isDone?'t-done':''}" onclick="nav('tool',${t.id})" role="button" tabindex="0" aria-label="${t.name}${isDone?' (complÃ©tÃ©)':''}">
          <div class="t-icon">${t.icon}</div><div class="t-name">${t.name}</div>
          <div class="t-xp">${isDone?'âœ“':'+'} ${t.xp}XP</div>
        </div>`;
      }).join('')}</div>
    </div>`).join('')}
  </div>`;
}

// â•â•â• TOOL EDITOR â•â•â•
function renderToolEditor(el){
  const t=TOOLS.find(x=>x.id===STATE.toolId);
  if(!t){nav('tools');return;}
  const data=STATE.toolData[t.key]||{};
  const filled=t.fields.filter(f=>(data[f]||'').length>5).length;
  const pct=Math.round((filled/t.fields.length)*100);
  const isDone=STATE.completedTools.includes(t.id);

  el.innerHTML=`
  <div class="page">
    <div class="page-head">
      <button class="back-btn" onclick="nav('tools')" aria-label="Retour aux outils">â† Outils</button>
      <h2>${t.icon} ${t.name}</h2>
      ${isDone?'<span class="done-badge">âœ“</span>':''}
    </div>
    <div class="tool-phase">${capitalize(t.phase)} â€¢ +${t.xp}XP</div>
    <div class="tool-help">${esc(t.help)}</div>
    <div class="tool-progress">
      <div class="tp-bar" role="progressbar" aria-valuenow="${filled}" aria-valuemax="${t.fields.length}"><div class="tp-fill" style="width:${pct}%"></div></div>
      <div class="tp-pct">${filled}/${t.fields.length} champs</div>
    </div>
    <div class="tool-fields" role="form" aria-label="Champs de l'outil">
      ${t.fields.map(f=>`
      <div class="tf-group">
        <label class="tf-label" for="tf_${f}">${capitalize(f.replace(/_/g,' '))}</label>
        <textarea id="tf_${f}" class="tf-input" rows="4" placeholder="${capitalize(f)}..." oninput="saveToolField('${t.key}','${f}',this.value)">${esc(data[f]||'')}</textarea>
      </div>`).join('')}
    </div>
    ${!isDone&&pct>=50?`<button class="hbtn hbtn-primary" onclick="completeTool(${t.id});renderCurrentView()">âœ“ Valider cet outil (+${t.xp}XP)</button>`:''}
    ${pct<50?'<div class="tool-tip">Remplissez au moins 50% des champs (>5 caractÃ¨res) pour valider.</div>':''}
  </div>`;
}
function capitalize(s){return s.charAt(0).toUpperCase()+s.slice(1);}

// â•â•â• FLASHCARDS â•â•â•
function renderFlashcards(el){
  const fcFiles=STATE.files.filter(isFlashcardFile);
  if(fcFiles.length===0){
    el.innerHTML=`
    <div class="page">
      <div class="page-head"><button class="back-btn" onclick="nav('hub')">â† QG</button><h2>ğŸ“š Flashcards</h2></div>
      <div class="fc-empty"><div class="fce-icon">ğŸ“š</div><div class="fce-title">Aucun jeu de flashcards</div>
        <div class="fce-text">Importez un CSV ou chargez les 40 cartes de dÃ©mo.</div>
        <div class="fce-actions">
          <button class="hbtn hbtn-primary" onclick="loadDemoFlashcards()">ğŸ¯ Charger 40 cartes dÃ©mo</button>
          <button class="hbtn" onclick="document.getElementById('fcFileInput').click()">ğŸ“¥ Importer CSV</button>
        </div>
      </div>
      <input type="file" id="fcFileInput" hidden accept=".csv,.json" onchange="handleFiles(this.files);this.value=''">
    </div>`;return;
  }
  if(!fcState||!fcFiles.find(f=>f.id===fcState.fileId)){
    const f=fcFiles[0];
    fcState={fileId:f.id,cards:[...f.data],index:0,flipped:false,good:0,bad:0,shuffled:false};
  }
  const card=fcState.cards[fcState.index];
  const progress=((fcState.index+1)/fcState.cards.length)*100;

  el.innerHTML=`
  <div class="page">
    <div class="page-head"><button class="back-btn" onclick="nav('hub')">â† QG</button><h2>ğŸ“š Flashcards</h2></div>
    <div class="fc-toolbar">
      <select class="fc-select" onchange="fcChangeFile(this.value)" aria-label="Choisir un jeu">
        ${fcFiles.map(f=>`<option value="${f.id}" ${f.id===fcState.fileId?'selected':''}>${esc(f.name)} (${f.data.length})</option>`).join('')}
      </select>
      <button class="hbtn-sm" onclick="fcShuffle()" aria-label="MÃ©langer">ğŸ”€</button>
      <button class="hbtn-sm" onclick="loadDemoFlashcards()" aria-label="Charger dÃ©mo">â•</button>
      <button class="hbtn-sm" onclick="document.getElementById('fcFileInput2').click()" aria-label="Importer">ğŸ“¥</button>
    </div>
    <input type="file" id="fcFileInput2" hidden accept=".csv" onchange="handleFiles(this.files);this.value=''">
    <div class="fc-card-wrap" onclick="fcFlip()" role="button" tabindex="0" aria-label="Retourner la carte">
      <div class="fc-card ${fcState.flipped?'flipped':''}">
        <div class="fc-inner">
          <div class="fc-front"><div class="fc-label">QUESTION</div><div class="fc-question">${esc(card.question)}</div><div class="fc-tap">Touchez / Espace</div></div>
          <div class="fc-back"><div class="fc-label">RÃ‰PONSE</div><div class="fc-answer">${esc(card.answer)}</div></div>
        </div>
      </div>
    </div>
    <div class="fc-progress-wrap"><div class="fc-pbar"><div class="fc-pfill" style="width:${progress}%"></div></div><div class="fc-counter">${fcState.index+1} / ${fcState.cards.length}</div></div>
    ${fcState.flipped?`<div class="fc-rating">
      <button class="fcr-btn fcr-good" onclick="fcMark('good')" aria-label="Je savais">âœ“ Je savais</button>
      <button class="fcr-btn fcr-bad" onclick="fcMark('bad')" aria-label="Ã€ revoir">âœ— Ã€ revoir</button>
    </div>`:''}
    <div class="fc-nav">
      <button class="hbtn" onclick="fcPrev()" ${fcState.index===0?'disabled':''} aria-label="Carte prÃ©cÃ©dente">â¬…ï¸ PrÃ©c.</button>
      <button class="hbtn hbtn-primary" onclick="fcFlip()" aria-label="Retourner">ğŸ”„</button>
      <button class="hbtn" onclick="fcNext()" ${fcState.index>=fcState.cards.length-1?'disabled':''} aria-label="Carte suivante">Suiv. â¡ï¸</button>
    </div>
    <div class="fc-stats-row">
      <span>Session: ${fcState.good+fcState.bad}</span>
      ${fcState.good?`<span class="fcs-good">âœ“ ${fcState.good}</span>`:''}
      ${fcState.bad?`<span class="fcs-bad">âœ— ${fcState.bad}</span>`:''}
      <span>Total: ${STATE.fcStats.reviewed}</span>
    </div>
  </div>`;
}

function fcFlip(){if(!fcState)return;fcState.flipped=!fcState.flipped;renderCurrentView();}
function fcNext(){if(!fcState||fcState.index>=fcState.cards.length-1)return;fcState.index++;fcState.flipped=false;renderCurrentView();}
function fcPrev(){if(!fcState||fcState.index<=0)return;fcState.index--;fcState.flipped=false;renderCurrentView();}
function fcShuffle(){if(!fcState)return;for(let i=fcState.cards.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[fcState.cards[i],fcState.cards[j]]=[fcState.cards[j],fcState.cards[i]];}fcState.index=0;fcState.flipped=false;toast('ğŸ”€ MÃ©langÃ©');renderCurrentView();}
function fcMark(type){
  if(!fcState)return;
  if(type==='good')fcState.good++;else fcState.bad++;
  STATE.fcStats.reviewed++;
  if(STATE.fcStats.reviewed>=100)unlock('fc_master');
  if(fcState.index>=fcState.cards.length-1){
    STATE.fcStats.sessions++;unlock('fc_session');
    if(fcState.bad===0&&fcState.good>=10)unlock('fc_perfect');
    toast(`ğŸ‰ Session! ${fcState.good}/${fcState.good+fcState.bad}`,'success');
  }
  save();fcNext();
}
function fcChangeFile(id){const f=STATE.files.find(x=>x.id==id);if(!f||!isFlashcardFile(f))return;fcState={fileId:f.id,cards:[...f.data],index:0,flipped:false,good:0,bad:0,shuffled:false};renderCurrentView();}

// â•â•â• TROPHIES â•â•â•
function renderTrophies(el){
  const unlocked=STATE.achievements;
  el.innerHTML=`
  <div class="page">
    <div class="page-head"><button class="back-btn" onclick="nav('hub')">â† QG</button><h2>ğŸ† TrophÃ©es & Rangs</h2></div>
    <div class="page-sub">${unlocked.length}/${ACHIEVEMENTS.length} trophÃ©es</div>
    <div class="ranks-section"><h3>Rangs</h3>
      <div class="ranks-grid">${RANKS.map(r=>{
        const a=STATE.xp>=r.min;
        return `<div class="rank-card ${a?'rk-done':'rk-locked'}"><div class="rk-icon">${r.icon}</div><div class="rk-name" style="color:${a?r.color:'var(--t3)'}">${r.name}</div><div class="rk-min">${r.min} XP</div></div>`;
      }).join('')}</div>
    </div>
    <div class="trophies-section"><h3>TrophÃ©es</h3>
      <div class="trophy-grid">${ACHIEVEMENTS.map(a=>{
        const got=unlocked.includes(a.id);
        return `<div class="trophy-card ${got?'tr-done':'tr-locked'}"><div class="tr-icon">${got?a.icon:'ğŸ”’'}</div><div class="tr-name">${got?a.name:'???'}</div><div class="tr-desc">${a.desc}</div><div class="tr-xp">${got?`âœ“ +${a.xp}XP`:`+${a.xp}XP`}</div></div>`;
      }).join('')}</div>
    </div>
  </div>`;
}

// â•â•â• STATS VIEW â€” NEW â•â•â•
function renderStats(el){
  const s=getStats();
  const rank=getRank();
  const maxContent=MISSIONS.reduce((s,m)=>s+m.objectives.filter(o=>o.content).length,0);
  el.innerHTML=`
  <div class="page">
    <div class="page-head"><button class="back-btn" onclick="nav('hub')">â† QG</button><h2>ğŸ“Š Statistiques</h2></div>
    <div class="stats-grid">
      <div class="stat-card"><div class="sc-icon">ğŸ¯</div><div class="sc-val">${s.completedM}/${s.totalM}</div><div class="sc-label">Missions complÃ¨tes</div></div>
      <div class="stat-card"><div class="sc-icon">âœ…</div><div class="sc-val">${s.doneObj}/${s.totalObj}</div><div class="sc-label">Objectifs cochÃ©s</div></div>
      <div class="stat-card"><div class="sc-icon">ğŸ“–</div><div class="sc-val">${s.readContent}/${maxContent}</div><div class="sc-label">Contenus lus</div></div>
      <div class="stat-card"><div class="sc-icon">ğŸ“</div><div class="sc-val">${s.quizPassed}/${s.quizDone}</div><div class="sc-label">Quiz rÃ©ussis</div></div>
      <div class="stat-card"><div class="sc-icon">ğŸ› ï¸</div><div class="sc-val">${s.completedTools}/15</div><div class="sc-label">Outils complÃ©tÃ©s</div></div>
      <div class="stat-card"><div class="sc-icon">ğŸ†</div><div class="sc-val">${s.achievements}/${s.totalAchiev}</div><div class="sc-label">TrophÃ©es</div></div>
      <div class="stat-card"><div class="sc-icon">ğŸ“š</div><div class="sc-val">${s.fcReviewed}</div><div class="sc-label">Flashcards rÃ©visÃ©es</div></div>
      <div class="stat-card"><div class="sc-icon">â±ï¸</div><div class="sc-val">${STATE.totalTime}m</div><div class="sc-label">Temps total</div></div>
    </div>
    <div class="stats-xp">
      <h3>Ã‰conomie XP</h3>
      <div class="xp-breakdown">
        <div class="xpb-row"><span>XP actuel</span><strong>${STATE.xp}</strong></div>
        <div class="xpb-row"><span>Rang</span><strong>${rank.icon} ${rank.name}</strong></div>
        <div class="xpb-row"><span>Prochain rang</span><strong>${getNextRank().icon} ${getNextRank().name} (${getNextRank().min}XP)</strong></div>
      </div>
    </div>
    <div class="stats-missions"><h3>DÃ©tail par mission</h3>
      ${MISSIONS.map(m=>{
        const md=m.objectives.filter(o=>STATE.completedObj.includes(o.id)).length;
        const mt=m.objectives.length;
        const mr=m.objectives.filter(o=>STATE.readContent.includes(o.id)).length;
        const mc=m.objectives.filter(o=>o.content).length;
        const qr=STATE.quizResults[m.id];
        return `<div class="sm-row">
          <span class="sm-icon">${m.icon}</span>
          <span class="sm-name">${esc(m.name)}</span>
          <span class="sm-obj">${md}/${mt} obj</span>
          <span class="sm-read">${mr}/${mc} ğŸ“–</span>
          <span class="sm-quiz">${qr?`${qr.score}/${qr.total} ${qr.passed?'âœ…':'âŒ'}`:'â€”'}</span>
        </div>`;
      }).join('')}
    </div>
  </div>`;
}

// â•â•â• KEYBOARD â•â•â•
document.addEventListener('keydown',e=>{
  if(e.target.tagName==='INPUT'||e.target.tagName==='TEXTAREA'||e.target.tagName==='SELECT')return;
  if(STATE.view==='flashcards'&&fcState){
    if(e.key===' '||e.key==='Enter'){e.preventDefault();fcFlip();}
    else if(e.key==='ArrowRight'){e.preventDefault();fcNext();}
    else if(e.key==='ArrowLeft'){e.preventDefault();fcPrev();}
  }
  if(e.key==='Escape'){
    if(STATE.view==='mission')nav('missions');
    else if(STATE.view==='tool')nav('tools');
    else if(STATE.view==='quiz')nav('mission',STATE.missionId);
    else if(STATE.view==='stats')nav('hub');
    else nav('hub');
  }
});

// Enter on role=button elements
document.addEventListener('keydown',e=>{
  if((e.key==='Enter'||e.key===' ')&&e.target.getAttribute('role')==='button'){
    e.preventDefault();e.target.click();
  }
});

// â•â•â• SWIPE â•â•â•
var touchStartX=0;
document.addEventListener('touchstart',e=>{touchStartX=e.changedTouches[0].screenX;},{passive:true});
document.addEventListener('touchend',e=>{
  const diff=e.changedTouches[0].screenX-touchStartX;
  if(STATE.view==='flashcards'&&fcState){if(diff>60)fcPrev();else if(diff<-60)fcNext();}
},{passive:true});

// â•â•â• INIT â•â•â•
document.addEventListener('DOMContentLoaded',()=>{initEngine();renderCurrentView();});

window.RANKS=RANKS;
window.MISSIONS=MISSIONS;
window.TOOLS=TOOLS;
window.ACHIEVEMENTS=ACHIEVEMENTS;
window.DEMO_FLASHCARDS=DEMO_FLASHCARDS;
window.QUOTES=QUOTES;
window.STATE=STATE;
window.fcState=fcState;
window.nav=nav;
window.setTheme=setTheme;
window.renderCurrentView=renderCurrentView;
window.save=save;
window.resetAll=resetAll;
window.toggleObjective=toggleObjective;
window.completeObjective=completeObjective;
window.completeTool=completeTool;
window.saveToolField=saveToolField;
window.submitQuiz=submitQuiz;
window.markContentRead=markContentRead;
window.toggleContent=toggleContent;
window.openToolFromMission=openToolFromMission;
window.handleFiles=handleFiles;
window.loadDemoFlashcards=loadDemoFlashcards;
window.exportProject=exportProject;
window.importProject=importProject;
window.filterMissions=filterMissions;
window.addXP=addXP;
window.updateXPBar=updateXPBar;
window.unlock=unlock;
window.fcFlip=fcFlip;
window.fcNext=fcNext;
window.fcPrev=fcPrev;
window.fcShuffle=fcShuffle;
window.fcMark=fcMark;
window.fcChangeFile=fcChangeFile;
window.isFlashcardFile=isFlashcardFile;
window.getRank=getRank;
window.getNextRank=getNextRank;
window.getStats=getStats;
window.initEngine=initEngine;
window._q=_q;
window._qa=_qa;
window.esc=esc;
window.toast=toast;
window.vibrate=vibrate;
})();
</script>
</body>
</html>
